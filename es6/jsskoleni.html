<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_rouvg9ehyyqu-4>li:before{content:"\0025cb  "}.lst-kix_rouvg9ehyyqu-3>li:before{content:"\0025cf  "}.lst-kix_rouvg9ehyyqu-5>li:before{content:"\0025a0  "}.lst-kix_4t9z9wdwsk1j-8>li:before{content:"\0025a0  "}.lst-kix_rouvg9ehyyqu-1>li:before{content:"\0025cb  "}.lst-kix_4t9z9wdwsk1j-7>li:before{content:"\0025cb  "}.lst-kix_2z3wo3dq6fmt-0>li:before{content:"\0025cf  "}.lst-kix_rouvg9ehyyqu-2>li:before{content:"\0025a0  "}.lst-kix_4t9z9wdwsk1j-4>li:before{content:"\0025cb  "}.lst-kix_4t9z9wdwsk1j-5>li:before{content:"\0025a0  "}.lst-kix_2z3wo3dq6fmt-2>li:before{content:"\0025a0  "}.lst-kix_2z3wo3dq6fmt-4>li:before{content:"\0025cb  "}.lst-kix_4t9z9wdwsk1j-6>li:before{content:"\0025cf  "}.lst-kix_vkubbxfxchhz-3>li{counter-increment:lst-ctn-kix_vkubbxfxchhz-3}.lst-kix_4t9z9wdwsk1j-2>li:before{content:"\0025a0  "}.lst-kix_4t9z9wdwsk1j-3>li:before{content:"\0025cf  "}.lst-kix_2z3wo3dq6fmt-1>li:before{content:"\0025cb  "}.lst-kix_2z3wo3dq6fmt-5>li:before{content:"\0025a0  "}ol.lst-kix_vkubbxfxchhz-0.start{counter-reset:lst-ctn-kix_vkubbxfxchhz-0 0}.lst-kix_rouvg9ehyyqu-8>li:before{content:"\0025a0  "}.lst-kix_rouvg9ehyyqu-7>li:before{content:"\0025cb  "}.lst-kix_fq6btj7vnec0-1>li{counter-increment:lst-ctn-kix_fq6btj7vnec0-1}.lst-kix_rouvg9ehyyqu-6>li:before{content:"\0025cf  "}.lst-kix_by2n98cuczd6-3>li:before{content:"\0025cf  "}.lst-kix_by2n98cuczd6-4>li:before{content:"\0025cb  "}.lst-kix_2z3wo3dq6fmt-3>li:before{content:"\0025cf  "}ul.lst-kix_31hzx6hp66dr-7{list-style-type:none}.lst-kix_4ksv5k89mk7o-4>li:before{content:"\0025cb  "}.lst-kix_4ksv5k89mk7o-5>li:before{content:"\0025a0  "}ul.lst-kix_31hzx6hp66dr-8{list-style-type:none}ul.lst-kix_mpwgtxiv3kp9-8{list-style-type:none}ul.lst-kix_31hzx6hp66dr-5{list-style-type:none}ul.lst-kix_31hzx6hp66dr-6{list-style-type:none}ul.lst-kix_mpwgtxiv3kp9-6{list-style-type:none}ul.lst-kix_mpwgtxiv3kp9-7{list-style-type:none}ul.lst-kix_mpwgtxiv3kp9-4{list-style-type:none}.lst-kix_by2n98cuczd6-2>li:before{content:"\0025a0  "}ul.lst-kix_mpwgtxiv3kp9-5{list-style-type:none}ul.lst-kix_mpwgtxiv3kp9-2{list-style-type:none}.lst-kix_48iho2cr90yo-1>li:before{content:"\0025cb  "}.lst-kix_by2n98cuczd6-1>li:before{content:"\0025cb  "}ol.lst-kix_ycyyl1aant9m-4.start{counter-reset:lst-ctn-kix_ycyyl1aant9m-4 0}.lst-kix_4ksv5k89mk7o-1>li:before{content:"\0025cb  "}ul.lst-kix_mpwgtxiv3kp9-3{list-style-type:none}.lst-kix_4t9z9wdwsk1j-0>li:before{content:"\0025cf  "}.lst-kix_4t9z9wdwsk1j-1>li:before{content:"\0025cb  "}ul.lst-kix_31hzx6hp66dr-0{list-style-type:none}ul.lst-kix_mpwgtxiv3kp9-0{list-style-type:none}.lst-kix_48iho2cr90yo-0>li:before{content:"\0025cf  "}.lst-kix_48iho2cr90yo-2>li:before{content:"\0025a0  "}ul.lst-kix_mpwgtxiv3kp9-1{list-style-type:none}ul.lst-kix_31hzx6hp66dr-3{list-style-type:none}.lst-kix_4ksv5k89mk7o-2>li:before{content:"\0025a0  "}.lst-kix_4ksv5k89mk7o-3>li:before{content:"\0025cf  "}ul.lst-kix_31hzx6hp66dr-4{list-style-type:none}.lst-kix_by2n98cuczd6-0>li:before{content:"\0025cf  "}ul.lst-kix_31hzx6hp66dr-1{list-style-type:none}ul.lst-kix_31hzx6hp66dr-2{list-style-type:none}ul.lst-kix_opkv2h7ffxg6-1{list-style-type:none}ul.lst-kix_opkv2h7ffxg6-2{list-style-type:none}ul.lst-kix_opkv2h7ffxg6-0{list-style-type:none}ul.lst-kix_opkv2h7ffxg6-5{list-style-type:none}ul.lst-kix_opkv2h7ffxg6-6{list-style-type:none}ul.lst-kix_opkv2h7ffxg6-3{list-style-type:none}ul.lst-kix_opkv2h7ffxg6-4{list-style-type:none}.lst-kix_rouvg9ehyyqu-0>li:before{content:"\0025cf  "}.lst-kix_4ksv5k89mk7o-0>li:before{content:"\0025cf  "}ul.lst-kix_opkv2h7ffxg6-7{list-style-type:none}ul.lst-kix_opkv2h7ffxg6-8{list-style-type:none}ul.lst-kix_3q04d9q1ru48-0{list-style-type:none}.lst-kix_1sz5v54zqxkf-0>li:before{content:"\0025cf  "}.lst-kix_qccpe81twdhx-7>li:before{content:"\0025cb  "}.lst-kix_qccpe81twdhx-8>li:before{content:"\0025a0  "}.lst-kix_fq6btj7vnec0-5>li{counter-increment:lst-ctn-kix_fq6btj7vnec0-5}ul.lst-kix_3q04d9q1ru48-2{list-style-type:none}ul.lst-kix_3q04d9q1ru48-1{list-style-type:none}.lst-kix_vkubbxfxchhz-2>li:before{content:"" counter(lst-ctn-kix_vkubbxfxchhz-2,lower-roman) ". "}.lst-kix_vkubbxfxchhz-4>li:before{content:"" counter(lst-ctn-kix_vkubbxfxchhz-4,lower-latin) ". "}.lst-kix_qccpe81twdhx-5>li:before{content:"\0025a0  "}.lst-kix_vkubbxfxchhz-3>li:before{content:"" counter(lst-ctn-kix_vkubbxfxchhz-3,decimal) ". "}.lst-kix_vkubbxfxchhz-7>li:before{content:"" counter(lst-ctn-kix_vkubbxfxchhz-7,lower-latin) ". "}.lst-kix_1sz5v54zqxkf-3>li:before{content:"\0025cf  "}ol.lst-kix_vkubbxfxchhz-5.start{counter-reset:lst-ctn-kix_vkubbxfxchhz-5 0}.lst-kix_vkubbxfxchhz-6>li:before{content:"" counter(lst-ctn-kix_vkubbxfxchhz-6,decimal) ". "}.lst-kix_1sz5v54zqxkf-1>li:before{content:"\0025cb  "}.lst-kix_1sz5v54zqxkf-2>li:before{content:"\0025a0  "}.lst-kix_qccpe81twdhx-6>li:before{content:"\0025cf  "}.lst-kix_vkubbxfxchhz-5>li:before{content:"" counter(lst-ctn-kix_vkubbxfxchhz-5,lower-roman) ". "}.lst-kix_4ksv5k89mk7o-8>li:before{content:"\0025a0  "}.lst-kix_vkubbxfxchhz-0>li:before{content:"" counter(lst-ctn-kix_vkubbxfxchhz-0,decimal) ". "}.lst-kix_4ae848so2i63-0>li:before{content:"\0025cf  "}.lst-kix_4ksv5k89mk7o-6>li:before{content:"\0025cf  "}.lst-kix_4ksv5k89mk7o-7>li:before{content:"\0025cb  "}.lst-kix_vkubbxfxchhz-1>li:before{content:"" counter(lst-ctn-kix_vkubbxfxchhz-1,lower-latin) ". "}.lst-kix_by2n98cuczd6-5>li:before{content:"\0025a0  "}.lst-kix_vkubbxfxchhz-7>li{counter-increment:lst-ctn-kix_vkubbxfxchhz-7}ol.lst-kix_fq6btj7vnec0-3.start{counter-reset:lst-ctn-kix_fq6btj7vnec0-3 0}.lst-kix_by2n98cuczd6-6>li:before{content:"\0025cf  "}.lst-kix_by2n98cuczd6-7>li:before{content:"\0025cb  "}.lst-kix_by2n98cuczd6-8>li:before{content:"\0025a0  "}.lst-kix_1sz5v54zqxkf-7>li:before{content:"\0025cb  "}.lst-kix_qccpe81twdhx-0>li:before{content:"\0025cf  "}.lst-kix_1sz5v54zqxkf-8>li:before{content:"\0025a0  "}ul.lst-kix_4ae848so2i63-0{list-style-type:none}ul.lst-kix_4ae848so2i63-2{list-style-type:none}.lst-kix_qccpe81twdhx-1>li:before{content:"\0025cb  "}ul.lst-kix_4ae848so2i63-1{list-style-type:none}ul.lst-kix_4ae848so2i63-4{list-style-type:none}ul.lst-kix_4ae848so2i63-3{list-style-type:none}ul.lst-kix_4ae848so2i63-6{list-style-type:none}.lst-kix_1sz5v54zqxkf-4>li:before{content:"\0025cb  "}.lst-kix_qccpe81twdhx-3>li:before{content:"\0025cf  "}.lst-kix_qccpe81twdhx-4>li:before{content:"\0025cb  "}ul.lst-kix_4ae848so2i63-5{list-style-type:none}ul.lst-kix_4ae848so2i63-8{list-style-type:none}.lst-kix_vkubbxfxchhz-8>li:before{content:"" counter(lst-ctn-kix_vkubbxfxchhz-8,lower-roman) ". "}ul.lst-kix_4ae848so2i63-7{list-style-type:none}.lst-kix_1sz5v54zqxkf-5>li:before{content:"\0025a0  "}.lst-kix_1sz5v54zqxkf-6>li:before{content:"\0025cf  "}.lst-kix_qccpe81twdhx-2>li:before{content:"\0025a0  "}.lst-kix_igor9q5zmp1-0>li:before{content:"\0025cf  "}.lst-kix_igor9q5zmp1-6>li:before{content:"\0025cf  "}.lst-kix_igor9q5zmp1-8>li:before{content:"\0025a0  "}.lst-kix_vmm61z2vdfuo-5>li:before{content:"\0025a0  "}.lst-kix_ycyyl1aant9m-7>li{counter-increment:lst-ctn-kix_ycyyl1aant9m-7}.lst-kix_qoa7lrcyk9rp-5>li:before{content:"\0025a0  "}.lst-kix_4ae848so2i63-2>li:before{content:"\0025a0  "}.lst-kix_4ae848so2i63-4>li:before{content:"\0025cb  "}.lst-kix_qoa7lrcyk9rp-3>li:before{content:"\0025cf  "}.lst-kix_qoa7lrcyk9rp-7>li:before{content:"\0025cb  "}.lst-kix_qoa7lrcyk9rp-1>li:before{content:"\0025cb  "}.lst-kix_vmm61z2vdfuo-7>li:before{content:"\0025cb  "}.lst-kix_dbici9se59yr-3>li:before{content:"\0025cf  "}.lst-kix_xbn2f5wclfj2-3>li:before{content:"\0025cf  "}.lst-kix_igor9q5zmp1-4>li:before{content:"\0025cb  "}.lst-kix_xbn2f5wclfj2-1>li:before{content:"\0025cb  "}.lst-kix_igor9q5zmp1-2>li:before{content:"\0025a0  "}.lst-kix_4ae848so2i63-6>li:before{content:"\0025cf  "}.lst-kix_4ae848so2i63-8>li:before{content:"\0025a0  "}.lst-kix_dbici9se59yr-1>li:before{content:"\0025cb  "}.lst-kix_t0eo4rapitya-5>li:before{content:"\0025a0  "}ul.lst-kix_fq6btj7vnec0-0{list-style-type:none}.lst-kix_vkubbxfxchhz-6>li{counter-increment:lst-ctn-kix_vkubbxfxchhz-6}ul.lst-kix_by2n98cuczd6-1{list-style-type:none}.lst-kix_t0eo4rapitya-3>li:before{content:"\0025cf  "}ul.lst-kix_by2n98cuczd6-0{list-style-type:none}ul.lst-kix_by2n98cuczd6-3{list-style-type:none}ul.lst-kix_by2n98cuczd6-2{list-style-type:none}.lst-kix_xbn2f5wclfj2-5>li:before{content:"\0025a0  "}.lst-kix_48iho2cr90yo-5>li:before{content:"\0025a0  "}ul.lst-kix_by2n98cuczd6-5{list-style-type:none}ul.lst-kix_by2n98cuczd6-4{list-style-type:none}ul.lst-kix_by2n98cuczd6-7{list-style-type:none}ul.lst-kix_by2n98cuczd6-6{list-style-type:none}.lst-kix_ycyyl1aant9m-0>li{counter-increment:lst-ctn-kix_ycyyl1aant9m-0}.lst-kix_fq6btj7vnec0-4>li{counter-increment:lst-ctn-kix_fq6btj7vnec0-4}.lst-kix_xbn2f5wclfj2-7>li:before{content:"\0025cb  "}.lst-kix_48iho2cr90yo-3>li:before{content:"\0025cf  "}.lst-kix_48iho2cr90yo-7>li:before{content:"\0025cb  "}ul.lst-kix_by2n98cuczd6-8{list-style-type:none}.lst-kix_t0eo4rapitya-1>li:before{content:"\0025cb  "}.lst-kix_vkubbxfxchhz-0>li{counter-increment:lst-ctn-kix_vkubbxfxchhz-0}.lst-kix_jbf1zkiqoe4u-0>li:before{content:"\0025cf  "}.lst-kix_vmm61z2vdfuo-1>li:before{content:"\0025cb  "}.lst-kix_vmm61z2vdfuo-3>li:before{content:"\0025cf  "}.lst-kix_jbf1zkiqoe4u-4>li:before{content:"\0025cb  "}.lst-kix_ycyyl1aant9m-6>li{counter-increment:lst-ctn-kix_ycyyl1aant9m-6}.lst-kix_2z3wo3dq6fmt-6>li:before{content:"\0025cf  "}.lst-kix_2z3wo3dq6fmt-8>li:before{content:"\0025a0  "}.lst-kix_jbf1zkiqoe4u-2>li:before{content:"\0025a0  "}ol.lst-kix_vkubbxfxchhz-7.start{counter-reset:lst-ctn-kix_vkubbxfxchhz-7 0}.lst-kix_jbf1zkiqoe4u-8>li:before{content:"\0025a0  "}ul.lst-kix_2jsv4464cs7-7{list-style-type:none}ul.lst-kix_2jsv4464cs7-8{list-style-type:none}ul.lst-kix_2jsv4464cs7-5{list-style-type:none}ul.lst-kix_b24v3n72alu5-8{list-style-type:none}ul.lst-kix_2jsv4464cs7-6{list-style-type:none}ul.lst-kix_2jsv4464cs7-3{list-style-type:none}ul.lst-kix_b24v3n72alu5-6{list-style-type:none}ul.lst-kix_2jsv4464cs7-4{list-style-type:none}ul.lst-kix_b24v3n72alu5-7{list-style-type:none}ul.lst-kix_2jsv4464cs7-1{list-style-type:none}ul.lst-kix_b24v3n72alu5-4{list-style-type:none}ul.lst-kix_2jsv4464cs7-2{list-style-type:none}ul.lst-kix_b24v3n72alu5-5{list-style-type:none}ul.lst-kix_b24v3n72alu5-2{list-style-type:none}ul.lst-kix_2jsv4464cs7-0{list-style-type:none}ul.lst-kix_b24v3n72alu5-3{list-style-type:none}ul.lst-kix_b24v3n72alu5-0{list-style-type:none}ul.lst-kix_b24v3n72alu5-1{list-style-type:none}.lst-kix_jbf1zkiqoe4u-6>li:before{content:"\0025cf  "}.lst-kix_fq6btj7vnec0-2>li{counter-increment:lst-ctn-kix_fq6btj7vnec0-2}.lst-kix_b24v3n72alu5-3>li:before{content:"\0025cf  "}.lst-kix_ycyyl1aant9m-2>li{counter-increment:lst-ctn-kix_ycyyl1aant9m-2}.lst-kix_d214tla0wawn-6>li:before{content:"\0025cf  "}.lst-kix_b24v3n72alu5-2>li:before{content:"\0025a0  "}.lst-kix_b24v3n72alu5-6>li:before{content:"\0025cf  "}.lst-kix_d214tla0wawn-3>li:before{content:"\0025cf  "}.lst-kix_b24v3n72alu5-7>li:before{content:"\0025cb  "}.lst-kix_d214tla0wawn-7>li:before{content:"\0025cb  "}.lst-kix_fn2r9e2iql0w-0>li:before{content:"\0025cf  "}.lst-kix_7jmsqlb8j2ly-8>li:before{content:"\0025a0  "}.lst-kix_7j6icgh7pbn6-0>li:before{content:"\0025cf  "}.lst-kix_7j6icgh7pbn6-3>li:before{content:"\0025cf  "}.lst-kix_7j6icgh7pbn6-7>li:before{content:"\0025cb  "}.lst-kix_d214tla0wawn-2>li:before{content:"\0025a0  "}.lst-kix_7j6icgh7pbn6-4>li:before{content:"\0025cb  "}.lst-kix_7j6icgh7pbn6-8>li:before{content:"\0025a0  "}.lst-kix_t0eo4rapitya-8>li:before{content:"\0025a0  "}.lst-kix_7jmsqlb8j2ly-4>li:before{content:"\0025cb  "}.lst-kix_t0eo4rapitya-7>li:before{content:"\0025cb  "}.lst-kix_vkubbxfxchhz-2>li{counter-increment:lst-ctn-kix_vkubbxfxchhz-2}ol.lst-kix_fq6btj7vnec0-2.start{counter-reset:lst-ctn-kix_fq6btj7vnec0-2 0}.lst-kix_7jmsqlb8j2ly-5>li:before{content:"\0025a0  "}.lst-kix_opkv2h7ffxg6-1>li:before{content:"\0025cb  "}ol.lst-kix_ycyyl1aant9m-2{list-style-type:none}ol.lst-kix_ycyyl1aant9m-3{list-style-type:none}.lst-kix_opkv2h7ffxg6-0>li:before{content:"\0025cf  "}.lst-kix_3q04d9q1ru48-1>li:before{content:"\0025cb  "}ol.lst-kix_ycyyl1aant9m-4{list-style-type:none}ol.lst-kix_ycyyl1aant9m-5{list-style-type:none}.lst-kix_3q04d9q1ru48-0>li:before{content:"\0025cf  "}.lst-kix_3q04d9q1ru48-4>li:before{content:"\0025cb  "}ol.lst-kix_ycyyl1aant9m-0{list-style-type:none}ol.lst-kix_ycyyl1aant9m-1{list-style-type:none}.lst-kix_opkv2h7ffxg6-5>li:before{content:"\0025a0  "}.lst-kix_dbici9se59yr-6>li:before{content:"\0025cf  "}.lst-kix_opkv2h7ffxg6-4>li:before{content:"\0025cb  "}.lst-kix_3q04d9q1ru48-5>li:before{content:"\0025a0  "}.lst-kix_onycw2mbf8r4-5>li:before{content:"\0025a0  "}ol.lst-kix_ycyyl1aant9m-6{list-style-type:none}ol.lst-kix_ycyyl1aant9m-7{list-style-type:none}.lst-kix_dbici9se59yr-5>li:before{content:"\0025a0  "}ol.lst-kix_ycyyl1aant9m-8{list-style-type:none}ul.lst-kix_7j6icgh7pbn6-2{list-style-type:none}ul.lst-kix_7j6icgh7pbn6-3{list-style-type:none}ul.lst-kix_7j6icgh7pbn6-4{list-style-type:none}.lst-kix_opkv2h7ffxg6-8>li:before{content:"\0025a0  "}.lst-kix_onycw2mbf8r4-6>li:before{content:"\0025cf  "}.lst-kix_az99txz5znnd-5>li:before{content:"\0025a0  "}.lst-kix_31hzx6hp66dr-7>li:before{content:"\0025cb  "}ul.lst-kix_7j6icgh7pbn6-5{list-style-type:none}.lst-kix_az99txz5znnd-4>li:before{content:"\0025cb  "}.lst-kix_az99txz5znnd-8>li:before{content:"\0025a0  "}ul.lst-kix_7j6icgh7pbn6-0{list-style-type:none}ul.lst-kix_7j6icgh7pbn6-1{list-style-type:none}.lst-kix_ycyyl1aant9m-4>li{counter-increment:lst-ctn-kix_ycyyl1aant9m-4}ul.lst-kix_7j6icgh7pbn6-6{list-style-type:none}.lst-kix_31hzx6hp66dr-6>li:before{content:"\0025cf  "}ul.lst-kix_7j6icgh7pbn6-7{list-style-type:none}ul.lst-kix_7j6icgh7pbn6-8{list-style-type:none}.lst-kix_vkubbxfxchhz-4>li{counter-increment:lst-ctn-kix_vkubbxfxchhz-4}.lst-kix_mpwgtxiv3kp9-8>li:before{content:"\0025a0  "}ul.lst-kix_1sz5v54zqxkf-5{list-style-type:none}.lst-kix_az99txz5znnd-0>li:before{content:"\0025cf  "}ul.lst-kix_1sz5v54zqxkf-6{list-style-type:none}ul.lst-kix_1sz5v54zqxkf-7{list-style-type:none}ul.lst-kix_1sz5v54zqxkf-8{list-style-type:none}ul.lst-kix_1sz5v54zqxkf-1{list-style-type:none}ul.lst-kix_1sz5v54zqxkf-2{list-style-type:none}ul.lst-kix_1sz5v54zqxkf-3{list-style-type:none}.lst-kix_mpwgtxiv3kp9-4>li:before{content:"\0025cb  "}.lst-kix_az99txz5znnd-1>li:before{content:"\0025cb  "}.lst-kix_31hzx6hp66dr-3>li:before{content:"\0025cf  "}ul.lst-kix_1sz5v54zqxkf-4{list-style-type:none}.lst-kix_mpwgtxiv3kp9-5>li:before{content:"\0025a0  "}.lst-kix_31hzx6hp66dr-2>li:before{content:"\0025a0  "}ul.lst-kix_1sz5v54zqxkf-0{list-style-type:none}.lst-kix_mpwgtxiv3kp9-0>li:before{content:"\0025cf  "}.lst-kix_3q04d9q1ru48-8>li:before{content:"\0025a0  "}.lst-kix_onycw2mbf8r4-2>li:before{content:"\0025a0  "}.lst-kix_mpwgtxiv3kp9-1>li:before{content:"\0025cb  "}.lst-kix_onycw2mbf8r4-1>li:before{content:"\0025cb  "}ul.lst-kix_dbici9se59yr-8{list-style-type:none}ul.lst-kix_fn2r9e2iql0w-8{list-style-type:none}ul.lst-kix_dbici9se59yr-6{list-style-type:none}ul.lst-kix_dbici9se59yr-7{list-style-type:none}ul.lst-kix_fn2r9e2iql0w-5{list-style-type:none}ul.lst-kix_dbici9se59yr-4{list-style-type:none}ul.lst-kix_fn2r9e2iql0w-4{list-style-type:none}ul.lst-kix_dbici9se59yr-5{list-style-type:none}ul.lst-kix_fn2r9e2iql0w-7{list-style-type:none}ul.lst-kix_dbici9se59yr-2{list-style-type:none}ul.lst-kix_fn2r9e2iql0w-6{list-style-type:none}ul.lst-kix_dbici9se59yr-3{list-style-type:none}ul.lst-kix_dbici9se59yr-0{list-style-type:none}ul.lst-kix_dbici9se59yr-1{list-style-type:none}.lst-kix_p363njxl3evr-2>li:before{content:"\0025a0  "}.lst-kix_hh9zpd2sp2j5-0>li:before{content:"\0025cf  "}.lst-kix_fq6btj7vnec0-7>li{counter-increment:lst-ctn-kix_fq6btj7vnec0-7}ul.lst-kix_ogo8ft39oax0-0{list-style-type:none}ul.lst-kix_ogo8ft39oax0-1{list-style-type:none}ul.lst-kix_p363njxl3evr-2{list-style-type:none}.lst-kix_igor9q5zmp1-7>li:before{content:"\0025cb  "}ul.lst-kix_p363njxl3evr-1{list-style-type:none}ul.lst-kix_p363njxl3evr-0{list-style-type:none}ul.lst-kix_fn2r9e2iql0w-1{list-style-type:none}.lst-kix_vmm61z2vdfuo-6>li:before{content:"\0025cf  "}.lst-kix_2jsv4464cs7-7>li:before{content:"\0025cb  "}ul.lst-kix_fn2r9e2iql0w-0{list-style-type:none}ul.lst-kix_fn2r9e2iql0w-3{list-style-type:none}ul.lst-kix_fn2r9e2iql0w-2{list-style-type:none}ul.lst-kix_t0eo4rapitya-3{list-style-type:none}.lst-kix_2jsv4464cs7-3>li:before{content:"\0025cf  "}ul.lst-kix_t0eo4rapitya-4{list-style-type:none}ul.lst-kix_t0eo4rapitya-5{list-style-type:none}ol.lst-kix_fq6btj7vnec0-8.start{counter-reset:lst-ctn-kix_fq6btj7vnec0-8 0}ul.lst-kix_t0eo4rapitya-6{list-style-type:none}ul.lst-kix_t0eo4rapitya-7{list-style-type:none}.lst-kix_44m3iuh30613-8>li:before{content:"\0025a0  "}.lst-kix_tzspx2wq1yap-3>li:before{content:"\0025cf  "}ul.lst-kix_t0eo4rapitya-8{list-style-type:none}ol.lst-kix_fq6btj7vnec0-6{list-style-type:none}ul.lst-kix_p363njxl3evr-6{list-style-type:none}.lst-kix_ycyyl1aant9m-7>li:before{content:"" counter(lst-ctn-kix_ycyyl1aant9m-7,lower-latin) ". "}ul.lst-kix_ogo8ft39oax0-6{list-style-type:none}ol.lst-kix_fq6btj7vnec0-5{list-style-type:none}ul.lst-kix_p363njxl3evr-5{list-style-type:none}ul.lst-kix_ogo8ft39oax0-7{list-style-type:none}ol.lst-kix_fq6btj7vnec0-4{list-style-type:none}ul.lst-kix_p363njxl3evr-4{list-style-type:none}ul.lst-kix_ogo8ft39oax0-8{list-style-type:none}ol.lst-kix_fq6btj7vnec0-3{list-style-type:none}ul.lst-kix_p363njxl3evr-3{list-style-type:none}ol.lst-kix_fq6btj7vnec0-2{list-style-type:none}ul.lst-kix_ogo8ft39oax0-2{list-style-type:none}ol.lst-kix_fq6btj7vnec0-1{list-style-type:none}ul.lst-kix_ogo8ft39oax0-3{list-style-type:none}.lst-kix_qoa7lrcyk9rp-0>li:before{content:"\0025cf  "}.lst-kix_qoa7lrcyk9rp-8>li:before{content:"\0025a0  "}ul.lst-kix_t0eo4rapitya-0{list-style-type:none}ul.lst-kix_p363njxl3evr-8{list-style-type:none}.lst-kix_hh9zpd2sp2j5-8>li:before{content:"\0025a0  "}ul.lst-kix_ogo8ft39oax0-4{list-style-type:none}ul.lst-kix_t0eo4rapitya-1{list-style-type:none}ul.lst-kix_p363njxl3evr-7{list-style-type:none}ul.lst-kix_ogo8ft39oax0-5{list-style-type:none}ul.lst-kix_t0eo4rapitya-2{list-style-type:none}.lst-kix_4ae848so2i63-3>li:before{content:"\0025cf  "}ol.lst-kix_fq6btj7vnec0-5.start{counter-reset:lst-ctn-kix_fq6btj7vnec0-5 0}.lst-kix_dbici9se59yr-2>li:before{content:"\0025a0  "}.lst-kix_44m3iuh30613-0>li:before{content:"\0025cf  "}.lst-kix_44m3iuh30613-4>li:before{content:"\0025cb  "}.lst-kix_tzspx2wq1yap-7>li:before{content:"\0025cb  "}ol.lst-kix_fq6btj7vnec0-8{list-style-type:none}ol.lst-kix_fq6btj7vnec0-7{list-style-type:none}ul.lst-kix_3q04d9q1ru48-8{list-style-type:none}ul.lst-kix_3q04d9q1ru48-7{list-style-type:none}.lst-kix_xbn2f5wclfj2-2>li:before{content:"\0025a0  "}.lst-kix_igor9q5zmp1-3>li:before{content:"\0025cf  "}ul.lst-kix_3q04d9q1ru48-4{list-style-type:none}ul.lst-kix_3q04d9q1ru48-3{list-style-type:none}.lst-kix_qoa7lrcyk9rp-4>li:before{content:"\0025cb  "}ul.lst-kix_3q04d9q1ru48-6{list-style-type:none}.lst-kix_hh9zpd2sp2j5-4>li:before{content:"\0025cb  "}ul.lst-kix_3q04d9q1ru48-5{list-style-type:none}.lst-kix_4ae848so2i63-7>li:before{content:"\0025cb  "}.lst-kix_t0eo4rapitya-4>li:before{content:"\0025cb  "}.lst-kix_zfot4kvz3ssh-6>li:before{content:"\0025cf  "}.lst-kix_7jmsqlb8j2ly-1>li:before{content:"\0025cb  "}ul.lst-kix_7jmsqlb8j2ly-8{list-style-type:none}.lst-kix_4mye2heykeo1-5>li:before{content:"\0025a0  "}ul.lst-kix_7jmsqlb8j2ly-6{list-style-type:none}.lst-kix_xbn2f5wclfj2-6>li:before{content:"\0025cf  "}.lst-kix_48iho2cr90yo-6>li:before{content:"\0025cf  "}ul.lst-kix_7jmsqlb8j2ly-7{list-style-type:none}ul.lst-kix_7jmsqlb8j2ly-4{list-style-type:none}ul.lst-kix_7jmsqlb8j2ly-5{list-style-type:none}.lst-kix_zfot4kvz3ssh-2>li:before{content:"\0025a0  "}ul.lst-kix_7jmsqlb8j2ly-2{list-style-type:none}ul.lst-kix_7jmsqlb8j2ly-3{list-style-type:none}ol.lst-kix_fq6btj7vnec0-6.start{counter-reset:lst-ctn-kix_fq6btj7vnec0-6 0}.lst-kix_t0eo4rapitya-0>li:before{content:"\0025cf  "}.lst-kix_fq6btj7vnec0-3>li:before{content:"" counter(lst-ctn-kix_fq6btj7vnec0-3,decimal) ". "}.lst-kix_vmm61z2vdfuo-2>li:before{content:"\0025a0  "}ul.lst-kix_7jmsqlb8j2ly-0{list-style-type:none}.lst-kix_fn2r9e2iql0w-4>li:before{content:"\0025cb  "}ul.lst-kix_7jmsqlb8j2ly-1{list-style-type:none}ul.lst-kix_xbn2f5wclfj2-8{list-style-type:none}ul.lst-kix_xbn2f5wclfj2-7{list-style-type:none}ul.lst-kix_xbn2f5wclfj2-6{list-style-type:none}.lst-kix_jbf1zkiqoe4u-3>li:before{content:"\0025cf  "}ul.lst-kix_xbn2f5wclfj2-1{list-style-type:none}.lst-kix_fn2r9e2iql0w-8>li:before{content:"\0025a0  "}ul.lst-kix_xbn2f5wclfj2-0{list-style-type:none}ul.lst-kix_xbn2f5wclfj2-5{list-style-type:none}ul.lst-kix_xbn2f5wclfj2-4{list-style-type:none}ul.lst-kix_xbn2f5wclfj2-3{list-style-type:none}ul.lst-kix_xbn2f5wclfj2-2{list-style-type:none}.lst-kix_4mye2heykeo1-1>li:before{content:"\0025cb  "}ol.lst-kix_fq6btj7vnec0-7.start{counter-reset:lst-ctn-kix_fq6btj7vnec0-7 0}.lst-kix_p363njxl3evr-6>li:before{content:"\0025cf  "}.lst-kix_jbf1zkiqoe4u-7>li:before{content:"\0025cb  "}ol.lst-kix_fq6btj7vnec0-4.start{counter-reset:lst-ctn-kix_fq6btj7vnec0-4 0}.lst-kix_ogo8ft39oax0-5>li:before{content:"\0025a0  "}.lst-kix_ogo8ft39oax0-4>li:before{content:"\0025cb  "}.lst-kix_ogo8ft39oax0-6>li:before{content:"\0025cf  "}.lst-kix_ycyyl1aant9m-1>li{counter-increment:lst-ctn-kix_ycyyl1aant9m-1}.lst-kix_ogo8ft39oax0-8>li:before{content:"\0025a0  "}.lst-kix_ogo8ft39oax0-7>li:before{content:"\0025cb  "}.lst-kix_fq6btj7vnec0-6>li:before{content:"" counter(lst-ctn-kix_fq6btj7vnec0-6,decimal) ". "}.lst-kix_fq6btj7vnec0-4>li:before{content:"" counter(lst-ctn-kix_fq6btj7vnec0-4,lower-latin) ". "}.lst-kix_fq6btj7vnec0-8>li:before{content:"" counter(lst-ctn-kix_fq6btj7vnec0-8,lower-roman) ". "}ul.lst-kix_48iho2cr90yo-8{list-style-type:none}ul.lst-kix_48iho2cr90yo-7{list-style-type:none}.lst-kix_fq6btj7vnec0-5>li:before{content:"" counter(lst-ctn-kix_fq6btj7vnec0-5,lower-roman) ". "}ul.lst-kix_48iho2cr90yo-4{list-style-type:none}.lst-kix_ogo8ft39oax0-1>li:before{content:"\0025cb  "}ul.lst-kix_48iho2cr90yo-3{list-style-type:none}ul.lst-kix_48iho2cr90yo-6{list-style-type:none}ol.lst-kix_vkubbxfxchhz-6.start{counter-reset:lst-ctn-kix_vkubbxfxchhz-6 0}.lst-kix_ogo8ft39oax0-2>li:before{content:"\0025a0  "}ul.lst-kix_48iho2cr90yo-5{list-style-type:none}ul.lst-kix_48iho2cr90yo-0{list-style-type:none}.lst-kix_ogo8ft39oax0-3>li:before{content:"\0025cf  "}.lst-kix_fq6btj7vnec0-7>li:before{content:"" counter(lst-ctn-kix_fq6btj7vnec0-7,lower-latin) ". "}ul.lst-kix_48iho2cr90yo-2{list-style-type:none}ul.lst-kix_48iho2cr90yo-1{list-style-type:none}ul.lst-kix_4t9z9wdwsk1j-3{list-style-type:none}ul.lst-kix_4t9z9wdwsk1j-2{list-style-type:none}ul.lst-kix_4t9z9wdwsk1j-5{list-style-type:none}ul.lst-kix_4t9z9wdwsk1j-4{list-style-type:none}ul.lst-kix_4t9z9wdwsk1j-1{list-style-type:none}ul.lst-kix_4t9z9wdwsk1j-0{list-style-type:none}.lst-kix_fq6btj7vnec0-3>li{counter-increment:lst-ctn-kix_fq6btj7vnec0-3}.lst-kix_vkubbxfxchhz-5>li{counter-increment:lst-ctn-kix_vkubbxfxchhz-5}.lst-kix_ogo8ft39oax0-0>li:before{content:"\0025cf  "}ul.lst-kix_4t9z9wdwsk1j-7{list-style-type:none}ul.lst-kix_4t9z9wdwsk1j-6{list-style-type:none}ul.lst-kix_4t9z9wdwsk1j-8{list-style-type:none}ul.lst-kix_zfot4kvz3ssh-8{list-style-type:none}.lst-kix_ycyyl1aant9m-5>li{counter-increment:lst-ctn-kix_ycyyl1aant9m-5}ol.lst-kix_vkubbxfxchhz-7{list-style-type:none}ul.lst-kix_zfot4kvz3ssh-0{list-style-type:none}ol.lst-kix_vkubbxfxchhz-6{list-style-type:none}ul.lst-kix_zfot4kvz3ssh-1{list-style-type:none}ul.lst-kix_zfot4kvz3ssh-2{list-style-type:none}ol.lst-kix_vkubbxfxchhz-8{list-style-type:none}ul.lst-kix_zfot4kvz3ssh-3{list-style-type:none}ul.lst-kix_zfot4kvz3ssh-4{list-style-type:none}ul.lst-kix_zfot4kvz3ssh-5{list-style-type:none}ul.lst-kix_zfot4kvz3ssh-6{list-style-type:none}ul.lst-kix_zfot4kvz3ssh-7{list-style-type:none}ul.lst-kix_4ksv5k89mk7o-5{list-style-type:none}.lst-kix_upt3vuci1mnj-2>li:before{content:"\0025a0  "}ul.lst-kix_4ksv5k89mk7o-4{list-style-type:none}ul.lst-kix_4ksv5k89mk7o-3{list-style-type:none}ol.lst-kix_ycyyl1aant9m-3.start{counter-reset:lst-ctn-kix_ycyyl1aant9m-3 0}ul.lst-kix_4ksv5k89mk7o-2{list-style-type:none}.lst-kix_upt3vuci1mnj-0>li:before{content:"\0025cf  "}.lst-kix_upt3vuci1mnj-4>li:before{content:"\0025cb  "}ul.lst-kix_4ksv5k89mk7o-8{list-style-type:none}ul.lst-kix_4ksv5k89mk7o-7{list-style-type:none}.lst-kix_upt3vuci1mnj-3>li:before{content:"\0025cf  "}ul.lst-kix_4ksv5k89mk7o-6{list-style-type:none}ul.lst-kix_4ksv5k89mk7o-1{list-style-type:none}ul.lst-kix_4ksv5k89mk7o-0{list-style-type:none}.lst-kix_upt3vuci1mnj-1>li:before{content:"\0025cb  "}ul.lst-kix_4mye2heykeo1-5{list-style-type:none}.lst-kix_ycyyl1aant9m-3>li:before{content:"" counter(lst-ctn-kix_ycyyl1aant9m-3,decimal) ". "}.lst-kix_vkubbxfxchhz-1>li{counter-increment:lst-ctn-kix_vkubbxfxchhz-1}ul.lst-kix_4mye2heykeo1-4{list-style-type:none}.lst-kix_tzspx2wq1yap-1>li:before{content:"\0025cb  "}ul.lst-kix_4mye2heykeo1-3{list-style-type:none}.lst-kix_ycyyl1aant9m-2>li:before{content:"" counter(lst-ctn-kix_ycyyl1aant9m-2,lower-roman) ". "}.lst-kix_ycyyl1aant9m-4>li:before{content:"" counter(lst-ctn-kix_ycyyl1aant9m-4,lower-latin) ". "}.lst-kix_upt3vuci1mnj-8>li:before{content:"\0025a0  "}ul.lst-kix_4mye2heykeo1-2{list-style-type:none}ul.lst-kix_4mye2heykeo1-1{list-style-type:none}ul.lst-kix_4mye2heykeo1-0{list-style-type:none}.lst-kix_tzspx2wq1yap-0>li:before{content:"\0025cf  "}.lst-kix_upt3vuci1mnj-7>li:before{content:"\0025cb  "}ul.lst-kix_onycw2mbf8r4-7{list-style-type:none}ul.lst-kix_onycw2mbf8r4-6{list-style-type:none}ul.lst-kix_onycw2mbf8r4-5{list-style-type:none}.lst-kix_ycyyl1aant9m-0>li:before{content:"" counter(lst-ctn-kix_ycyyl1aant9m-0,decimal) ". "}.lst-kix_upt3vuci1mnj-6>li:before{content:"\0025cf  "}ul.lst-kix_onycw2mbf8r4-4{list-style-type:none}.lst-kix_ycyyl1aant9m-1>li:before{content:"" counter(lst-ctn-kix_ycyyl1aant9m-1,lower-latin) ". "}.lst-kix_upt3vuci1mnj-5>li:before{content:"\0025a0  "}ul.lst-kix_onycw2mbf8r4-8{list-style-type:none}ul.lst-kix_onycw2mbf8r4-3{list-style-type:none}ul.lst-kix_onycw2mbf8r4-2{list-style-type:none}ul.lst-kix_onycw2mbf8r4-1{list-style-type:none}ul.lst-kix_onycw2mbf8r4-0{list-style-type:none}ul.lst-kix_4mye2heykeo1-8{list-style-type:none}ul.lst-kix_4mye2heykeo1-7{list-style-type:none}ul.lst-kix_4mye2heykeo1-6{list-style-type:none}ul.lst-kix_upt3vuci1mnj-1{list-style-type:none}ul.lst-kix_upt3vuci1mnj-0{list-style-type:none}ul.lst-kix_upt3vuci1mnj-5{list-style-type:none}ul.lst-kix_upt3vuci1mnj-4{list-style-type:none}ul.lst-kix_upt3vuci1mnj-3{list-style-type:none}ul.lst-kix_upt3vuci1mnj-2{list-style-type:none}.lst-kix_hh9zpd2sp2j5-1>li:before{content:"\0025cb  "}ul.lst-kix_upt3vuci1mnj-8{list-style-type:none}.lst-kix_p363njxl3evr-3>li:before{content:"\0025cf  "}ul.lst-kix_upt3vuci1mnj-7{list-style-type:none}ul.lst-kix_upt3vuci1mnj-6{list-style-type:none}.lst-kix_p363njxl3evr-1>li:before{content:"\0025cb  "}.lst-kix_ycyyl1aant9m-6>li:before{content:"" counter(lst-ctn-kix_ycyyl1aant9m-6,decimal) ". "}.lst-kix_2jsv4464cs7-6>li:before{content:"\0025cf  "}.lst-kix_2jsv4464cs7-4>li:before{content:"\0025cb  "}.lst-kix_tzspx2wq1yap-2>li:before{content:"\0025a0  "}ul.lst-kix_tzspx2wq1yap-8{list-style-type:none}ul.lst-kix_tzspx2wq1yap-7{list-style-type:none}ul.lst-kix_tzspx2wq1yap-6{list-style-type:none}.lst-kix_tzspx2wq1yap-4>li:before{content:"\0025cb  "}ul.lst-kix_tzspx2wq1yap-5{list-style-type:none}ul.lst-kix_tzspx2wq1yap-4{list-style-type:none}ul.lst-kix_tzspx2wq1yap-3{list-style-type:none}.lst-kix_hh9zpd2sp2j5-7>li:before{content:"\0025cb  "}.lst-kix_44m3iuh30613-7>li:before{content:"\0025cb  "}.lst-kix_2jsv4464cs7-0>li:before{content:"\0025cf  "}.lst-kix_tzspx2wq1yap-6>li:before{content:"\0025cf  "}.lst-kix_ycyyl1aant9m-8>li:before{content:"" counter(lst-ctn-kix_ycyyl1aant9m-8,lower-roman) ". "}.lst-kix_2jsv4464cs7-2>li:before{content:"\0025a0  "}.lst-kix_hh9zpd2sp2j5-3>li:before{content:"\0025cf  "}.lst-kix_44m3iuh30613-3>li:before{content:"\0025cf  "}ol.lst-kix_vkubbxfxchhz-1{list-style-type:none}ol.lst-kix_vkubbxfxchhz-0{list-style-type:none}ol.lst-kix_vkubbxfxchhz-3{list-style-type:none}.lst-kix_hh9zpd2sp2j5-5>li:before{content:"\0025a0  "}.lst-kix_44m3iuh30613-1>li:before{content:"\0025cb  "}.lst-kix_44m3iuh30613-5>li:before{content:"\0025a0  "}ol.lst-kix_vkubbxfxchhz-2{list-style-type:none}.lst-kix_tzspx2wq1yap-8>li:before{content:"\0025a0  "}ol.lst-kix_vkubbxfxchhz-5{list-style-type:none}ol.lst-kix_vkubbxfxchhz-4{list-style-type:none}ul.lst-kix_tzspx2wq1yap-2{list-style-type:none}ul.lst-kix_tzspx2wq1yap-1{list-style-type:none}ul.lst-kix_tzspx2wq1yap-0{list-style-type:none}.lst-kix_zfot4kvz3ssh-7>li:before{content:"\0025cb  "}ol.lst-kix_ycyyl1aant9m-0.start{counter-reset:lst-ctn-kix_ycyyl1aant9m-0 0}ul.lst-kix_d214tla0wawn-8{list-style-type:none}.lst-kix_zfot4kvz3ssh-1>li:before{content:"\0025cb  "}.lst-kix_7jmsqlb8j2ly-0>li:before{content:"\0025cf  "}.lst-kix_fq6btj7vnec0-0>li:before{content:"\0025cf  "}.lst-kix_4mye2heykeo1-6>li:before{content:"\0025cf  "}.lst-kix_fq6btj7vnec0-2>li:before{content:"" counter(lst-ctn-kix_fq6btj7vnec0-2,lower-roman) ". "}.lst-kix_4mye2heykeo1-8>li:before{content:"\0025a0  "}.lst-kix_zfot4kvz3ssh-5>li:before{content:"\0025a0  "}ol.lst-kix_vkubbxfxchhz-8.start{counter-reset:lst-ctn-kix_vkubbxfxchhz-8 0}.lst-kix_zfot4kvz3ssh-3>li:before{content:"\0025cf  "}.lst-kix_fn2r9e2iql0w-1>li:before{content:"\0025cb  "}ol.lst-kix_fq6btj7vnec0-1.start{counter-reset:lst-ctn-kix_fq6btj7vnec0-1 0}.lst-kix_fn2r9e2iql0w-3>li:before{content:"\0025cf  "}ul.lst-kix_d214tla0wawn-1{list-style-type:none}ul.lst-kix_d214tla0wawn-0{list-style-type:none}.lst-kix_2jsv4464cs7-8>li:before{content:"\0025a0  "}ul.lst-kix_d214tla0wawn-3{list-style-type:none}ul.lst-kix_d214tla0wawn-2{list-style-type:none}ul.lst-kix_d214tla0wawn-5{list-style-type:none}ul.lst-kix_d214tla0wawn-4{list-style-type:none}ul.lst-kix_d214tla0wawn-7{list-style-type:none}.lst-kix_fn2r9e2iql0w-5>li:before{content:"\0025a0  "}ul.lst-kix_d214tla0wawn-6{list-style-type:none}.lst-kix_4mye2heykeo1-4>li:before{content:"\0025cb  "}.lst-kix_p363njxl3evr-5>li:before{content:"\0025a0  "}.lst-kix_fn2r9e2iql0w-7>li:before{content:"\0025cb  "}.lst-kix_4mye2heykeo1-0>li:before{content:"\0025cf  "}.lst-kix_4mye2heykeo1-2>li:before{content:"\0025a0  "}.lst-kix_b24v3n72alu5-0>li:before{content:"\0025cf  "}.lst-kix_p363njxl3evr-7>li:before{content:"\0025cb  "}.lst-kix_d214tla0wawn-8>li:before{content:"\0025a0  "}.lst-kix_b24v3n72alu5-1>li:before{content:"\0025cb  "}.lst-kix_b24v3n72alu5-5>li:before{content:"\0025a0  "}.lst-kix_d214tla0wawn-4>li:before{content:"\0025cb  "}.lst-kix_d214tla0wawn-5>li:before{content:"\0025a0  "}.lst-kix_b24v3n72alu5-4>li:before{content:"\0025cb  "}ul.lst-kix_qoa7lrcyk9rp-7{list-style-type:none}ul.lst-kix_qoa7lrcyk9rp-8{list-style-type:none}ul.lst-kix_qoa7lrcyk9rp-5{list-style-type:none}ul.lst-kix_qoa7lrcyk9rp-6{list-style-type:none}ol.lst-kix_vkubbxfxchhz-3.start{counter-reset:lst-ctn-kix_vkubbxfxchhz-3 0}.lst-kix_b24v3n72alu5-8>li:before{content:"\0025a0  "}ul.lst-kix_jbf1zkiqoe4u-2{list-style-type:none}ul.lst-kix_jbf1zkiqoe4u-3{list-style-type:none}ul.lst-kix_jbf1zkiqoe4u-4{list-style-type:none}ul.lst-kix_jbf1zkiqoe4u-5{list-style-type:none}ul.lst-kix_jbf1zkiqoe4u-0{list-style-type:none}.lst-kix_7jmsqlb8j2ly-7>li:before{content:"\0025cb  "}ul.lst-kix_jbf1zkiqoe4u-1{list-style-type:none}ol.lst-kix_ycyyl1aant9m-1.start{counter-reset:lst-ctn-kix_ycyyl1aant9m-1 0}.lst-kix_7j6icgh7pbn6-2>li:before{content:"\0025a0  "}ul.lst-kix_qoa7lrcyk9rp-0{list-style-type:none}ul.lst-kix_jbf1zkiqoe4u-6{list-style-type:none}ul.lst-kix_qoa7lrcyk9rp-3{list-style-type:none}.lst-kix_7j6icgh7pbn6-1>li:before{content:"\0025cb  "}ul.lst-kix_jbf1zkiqoe4u-7{list-style-type:none}ul.lst-kix_qoa7lrcyk9rp-4{list-style-type:none}ul.lst-kix_jbf1zkiqoe4u-8{list-style-type:none}ul.lst-kix_qoa7lrcyk9rp-1{list-style-type:none}ul.lst-kix_qoa7lrcyk9rp-2{list-style-type:none}.lst-kix_d214tla0wawn-0>li:before{content:"\0025cf  "}.lst-kix_d214tla0wawn-1>li:before{content:"\0025cb  "}.lst-kix_7j6icgh7pbn6-6>li:before{content:"\0025cf  "}.lst-kix_7jmsqlb8j2ly-2>li:before{content:"\0025a0  "}.lst-kix_7jmsqlb8j2ly-3>li:before{content:"\0025cf  "}ol.lst-kix_ycyyl1aant9m-7.start{counter-reset:lst-ctn-kix_ycyyl1aant9m-7 0}.lst-kix_7jmsqlb8j2ly-6>li:before{content:"\0025cf  "}.lst-kix_7j6icgh7pbn6-5>li:before{content:"\0025a0  "}.lst-kix_3q04d9q1ru48-2>li:before{content:"\0025a0  "}.lst-kix_opkv2h7ffxg6-2>li:before{content:"\0025a0  "}.lst-kix_3q04d9q1ru48-3>li:before{content:"\0025cf  "}.lst-kix_onycw2mbf8r4-0>li:before{content:"\0025cf  "}.lst-kix_dbici9se59yr-8>li:before{content:"\0025a0  "}.lst-kix_dbici9se59yr-7>li:before{content:"\0025cb  "}.lst-kix_3q04d9q1ru48-6>li:before{content:"\0025cf  "}.lst-kix_onycw2mbf8r4-3>li:before{content:"\0025cf  "}.lst-kix_3q04d9q1ru48-7>li:before{content:"\0025cb  "}.lst-kix_onycw2mbf8r4-4>li:before{content:"\0025cb  "}.lst-kix_opkv2h7ffxg6-3>li:before{content:"\0025cf  "}.lst-kix_onycw2mbf8r4-7>li:before{content:"\0025cb  "}.lst-kix_az99txz5znnd-6>li:before{content:"\0025cf  "}.lst-kix_31hzx6hp66dr-8>li:before{content:"\0025a0  "}.lst-kix_onycw2mbf8r4-8>li:before{content:"\0025a0  "}.lst-kix_az99txz5znnd-7>li:before{content:"\0025cb  "}ul.lst-kix_az99txz5znnd-7{list-style-type:none}ul.lst-kix_az99txz5znnd-8{list-style-type:none}ul.lst-kix_az99txz5znnd-1{list-style-type:none}.lst-kix_31hzx6hp66dr-4>li:before{content:"\0025cb  "}ul.lst-kix_az99txz5znnd-2{list-style-type:none}.lst-kix_opkv2h7ffxg6-6>li:before{content:"\0025cf  "}.lst-kix_31hzx6hp66dr-5>li:before{content:"\0025a0  "}ul.lst-kix_az99txz5znnd-0{list-style-type:none}.lst-kix_opkv2h7ffxg6-7>li:before{content:"\0025cb  "}ul.lst-kix_az99txz5znnd-5{list-style-type:none}ul.lst-kix_az99txz5znnd-6{list-style-type:none}ul.lst-kix_az99txz5znnd-3{list-style-type:none}ul.lst-kix_az99txz5znnd-4{list-style-type:none}.lst-kix_mpwgtxiv3kp9-7>li:before{content:"\0025cb  "}ol.lst-kix_vkubbxfxchhz-4.start{counter-reset:lst-ctn-kix_vkubbxfxchhz-4 0}.lst-kix_31hzx6hp66dr-0>li:before{content:"\0025cf  "}.lst-kix_mpwgtxiv3kp9-6>li:before{content:"\0025cf  "}.lst-kix_31hzx6hp66dr-1>li:before{content:"\0025cb  "}.lst-kix_mpwgtxiv3kp9-3>li:before{content:"\0025cf  "}.lst-kix_az99txz5znnd-2>li:before{content:"\0025a0  "}ul.lst-kix_vmm61z2vdfuo-4{list-style-type:none}ul.lst-kix_vmm61z2vdfuo-5{list-style-type:none}.lst-kix_az99txz5znnd-3>li:before{content:"\0025cf  "}ul.lst-kix_vmm61z2vdfuo-6{list-style-type:none}ul.lst-kix_vmm61z2vdfuo-7{list-style-type:none}ul.lst-kix_vmm61z2vdfuo-0{list-style-type:none}ul.lst-kix_vmm61z2vdfuo-1{list-style-type:none}ul.lst-kix_vmm61z2vdfuo-2{list-style-type:none}ul.lst-kix_vmm61z2vdfuo-3{list-style-type:none}ul.lst-kix_hh9zpd2sp2j5-2{list-style-type:none}ul.lst-kix_rouvg9ehyyqu-8{list-style-type:none}ul.lst-kix_hh9zpd2sp2j5-3{list-style-type:none}ul.lst-kix_rouvg9ehyyqu-7{list-style-type:none}ul.lst-kix_hh9zpd2sp2j5-4{list-style-type:none}ul.lst-kix_rouvg9ehyyqu-6{list-style-type:none}ul.lst-kix_hh9zpd2sp2j5-5{list-style-type:none}ul.lst-kix_rouvg9ehyyqu-5{list-style-type:none}ul.lst-kix_vmm61z2vdfuo-8{list-style-type:none}ul.lst-kix_rouvg9ehyyqu-4{list-style-type:none}ul.lst-kix_rouvg9ehyyqu-3{list-style-type:none}ul.lst-kix_hh9zpd2sp2j5-0{list-style-type:none}ul.lst-kix_rouvg9ehyyqu-2{list-style-type:none}ul.lst-kix_hh9zpd2sp2j5-1{list-style-type:none}ul.lst-kix_rouvg9ehyyqu-1{list-style-type:none}ul.lst-kix_rouvg9ehyyqu-0{list-style-type:none}.lst-kix_mpwgtxiv3kp9-2>li:before{content:"\0025a0  "}ul.lst-kix_hh9zpd2sp2j5-6{list-style-type:none}ul.lst-kix_hh9zpd2sp2j5-7{list-style-type:none}ol.lst-kix_ycyyl1aant9m-2.start{counter-reset:lst-ctn-kix_ycyyl1aant9m-2 0}ul.lst-kix_hh9zpd2sp2j5-8{list-style-type:none}.lst-kix_ycyyl1aant9m-8>li{counter-increment:lst-ctn-kix_ycyyl1aant9m-8}ol.lst-kix_ycyyl1aant9m-5.start{counter-reset:lst-ctn-kix_ycyyl1aant9m-5 0}.lst-kix_fq6btj7vnec0-8>li{counter-increment:lst-ctn-kix_fq6btj7vnec0-8}ol.lst-kix_ycyyl1aant9m-8.start{counter-reset:lst-ctn-kix_ycyyl1aant9m-8 0}.lst-kix_p363njxl3evr-0>li:before{content:"\0025cf  "}.lst-kix_ycyyl1aant9m-5>li:before{content:"" counter(lst-ctn-kix_ycyyl1aant9m-5,lower-roman) ". "}.lst-kix_vmm61z2vdfuo-4>li:before{content:"\0025cb  "}.lst-kix_2jsv4464cs7-5>li:before{content:"\0025a0  "}ul.lst-kix_igor9q5zmp1-6{list-style-type:none}ul.lst-kix_igor9q5zmp1-5{list-style-type:none}.lst-kix_qoa7lrcyk9rp-6>li:before{content:"\0025cf  "}ul.lst-kix_igor9q5zmp1-8{list-style-type:none}ul.lst-kix_igor9q5zmp1-7{list-style-type:none}ul.lst-kix_2z3wo3dq6fmt-5{list-style-type:none}ul.lst-kix_igor9q5zmp1-2{list-style-type:none}ul.lst-kix_2z3wo3dq6fmt-6{list-style-type:none}ul.lst-kix_igor9q5zmp1-1{list-style-type:none}ul.lst-kix_2z3wo3dq6fmt-7{list-style-type:none}ul.lst-kix_igor9q5zmp1-4{list-style-type:none}ul.lst-kix_2z3wo3dq6fmt-8{list-style-type:none}ul.lst-kix_igor9q5zmp1-3{list-style-type:none}.lst-kix_4ae848so2i63-1>li:before{content:"\0025cb  "}.lst-kix_4ae848so2i63-5>li:before{content:"\0025a0  "}ul.lst-kix_2z3wo3dq6fmt-1{list-style-type:none}.lst-kix_44m3iuh30613-6>li:before{content:"\0025cf  "}ul.lst-kix_2z3wo3dq6fmt-2{list-style-type:none}.lst-kix_tzspx2wq1yap-5>li:before{content:"\0025a0  "}.lst-kix_qoa7lrcyk9rp-2>li:before{content:"\0025a0  "}ul.lst-kix_2z3wo3dq6fmt-3{list-style-type:none}ul.lst-kix_igor9q5zmp1-0{list-style-type:none}ul.lst-kix_2z3wo3dq6fmt-4{list-style-type:none}.lst-kix_vmm61z2vdfuo-8>li:before{content:"\0025a0  "}.lst-kix_2jsv4464cs7-1>li:before{content:"\0025cb  "}ul.lst-kix_2z3wo3dq6fmt-0{list-style-type:none}ul.lst-kix_44m3iuh30613-0{list-style-type:none}ul.lst-kix_44m3iuh30613-1{list-style-type:none}.lst-kix_44m3iuh30613-2>li:before{content:"\0025a0  "}.lst-kix_igor9q5zmp1-5>li:before{content:"\0025a0  "}ul.lst-kix_44m3iuh30613-2{list-style-type:none}.lst-kix_xbn2f5wclfj2-4>li:before{content:"\0025cb  "}ul.lst-kix_44m3iuh30613-3{list-style-type:none}.lst-kix_dbici9se59yr-4>li:before{content:"\0025cb  "}ol.lst-kix_vkubbxfxchhz-2.start{counter-reset:lst-ctn-kix_vkubbxfxchhz-2 0}.lst-kix_dbici9se59yr-0>li:before{content:"\0025cf  "}.lst-kix_hh9zpd2sp2j5-2>li:before{content:"\0025a0  "}.lst-kix_hh9zpd2sp2j5-6>li:before{content:"\0025cf  "}ul.lst-kix_44m3iuh30613-8{list-style-type:none}.lst-kix_fq6btj7vnec0-6>li{counter-increment:lst-ctn-kix_fq6btj7vnec0-6}.lst-kix_vkubbxfxchhz-8>li{counter-increment:lst-ctn-kix_vkubbxfxchhz-8}.lst-kix_xbn2f5wclfj2-0>li:before{content:"\0025cf  "}.lst-kix_igor9q5zmp1-1>li:before{content:"\0025cb  "}ul.lst-kix_44m3iuh30613-4{list-style-type:none}ul.lst-kix_44m3iuh30613-5{list-style-type:none}ul.lst-kix_44m3iuh30613-6{list-style-type:none}ul.lst-kix_44m3iuh30613-7{list-style-type:none}.lst-kix_zfot4kvz3ssh-8>li:before{content:"\0025a0  "}.lst-kix_t0eo4rapitya-6>li:before{content:"\0025cf  "}.lst-kix_48iho2cr90yo-8>li:before{content:"\0025a0  "}.lst-kix_t0eo4rapitya-2>li:before{content:"\0025a0  "}.lst-kix_zfot4kvz3ssh-0>li:before{content:"\0025cf  "}.lst-kix_48iho2cr90yo-4>li:before{content:"\0025cb  "}.lst-kix_4mye2heykeo1-7>li:before{content:"\0025cb  "}.lst-kix_fq6btj7vnec0-1>li:before{content:"" counter(lst-ctn-kix_fq6btj7vnec0-1,lower-latin) ". "}.lst-kix_zfot4kvz3ssh-4>li:before{content:"\0025cb  "}.lst-kix_xbn2f5wclfj2-8>li:before{content:"\0025a0  "}.lst-kix_fn2r9e2iql0w-2>li:before{content:"\0025a0  "}ul.lst-kix_qccpe81twdhx-3{list-style-type:none}ul.lst-kix_qccpe81twdhx-4{list-style-type:none}.lst-kix_jbf1zkiqoe4u-1>li:before{content:"\0025cb  "}ul.lst-kix_qccpe81twdhx-5{list-style-type:none}ol.lst-kix_ycyyl1aant9m-6.start{counter-reset:lst-ctn-kix_ycyyl1aant9m-6 0}ul.lst-kix_qccpe81twdhx-6{list-style-type:none}ul.lst-kix_qccpe81twdhx-0{list-style-type:none}ul.lst-kix_qccpe81twdhx-1{list-style-type:none}ul.lst-kix_qccpe81twdhx-2{list-style-type:none}ul.lst-kix_qccpe81twdhx-7{list-style-type:none}.lst-kix_fn2r9e2iql0w-6>li:before{content:"\0025cf  "}.lst-kix_vmm61z2vdfuo-0>li:before{content:"\0025cf  "}ul.lst-kix_qccpe81twdhx-8{list-style-type:none}.lst-kix_2z3wo3dq6fmt-7>li:before{content:"\0025cb  "}.lst-kix_ycyyl1aant9m-3>li{counter-increment:lst-ctn-kix_ycyyl1aant9m-3}.lst-kix_p363njxl3evr-4>li:before{content:"\0025cb  "}ol.lst-kix_vkubbxfxchhz-1.start{counter-reset:lst-ctn-kix_vkubbxfxchhz-1 0}.lst-kix_4mye2heykeo1-3>li:before{content:"\0025cf  "}.lst-kix_p363njxl3evr-8>li:before{content:"\0025a0  "}.lst-kix_jbf1zkiqoe4u-5>li:before{content:"\0025a0  "}ol{margin:0;padding:0}table td,table th{padding:0}.c4{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c13{background-color:#ffffff;font-family:"Courier New";color:#008000;font-weight:bold}.c12{background-color:#ffffff;max-width:452.9pt;padding:72pt 72pt 72pt 70.5pt}.c2{page-break-after:avoid;orphans:2;widows:2}.c15{background-color:#ff0000;color:#ffffff;font-weight:bold}.c0{orphans:2;widows:2;height:11pt}.c5{color:#cccccc;font-style:italic}.c10{color:#ff0000;font-weight:bold}.c9{color:#9900ff;font-family:"Courier New"}.c7{margin-left:36pt;padding-left:0pt}.c17{color:inherit;text-decoration:inherit}.c6{padding:0;margin:0}.c1{color:#4a86e8;font-family:"Courier New"}.c3{orphans:2;widows:2}.c11{margin-left:72pt;padding-left:0pt}.c18{color:#1155cc;text-decoration:underline}.c14{font-style:italic}.c16{margin-left:72pt}.c8{text-indent:36pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c12"><p class="c2 title" id="h.wtgoybsma1m6"><span>ES6</span></p><p class="c3"><span>ES6 (ECMAScript 2015) - latest version of ECMAScript standard. First update to the language since ES5 standardization in 2009.</span></p><p class="c0"><span></span></p><p class="c3"><span>Implementation in major javascript engines is still underway - see compatibility table </span><span class="c18"><a class="c17" href="https://www.google.com/url?q=http://kangax.github.io/compat-table/es6/&amp;sa=D&amp;ust=1461655420968000&amp;usg=AFQjCNHIMwwMn-oQIBD7GmImYx_qAkyBFw">http://kangax.github.io/compat-table/es6/</a></span></p><p class="c3"><span>&rarr; check the compatbility first if you want to use it in the browser. For NodeJs, all features marked as </span><span class="c14">shipping</span><span>&nbsp;are turned on by default.</span></p><p class="c0"><span></span></p><h2 class="c2" id="h.f5ltbpb8gjxo"><span>Block scoping</span></h2><p class="c3"><span>In ES5 all variables are function or global scoped (you should already know that)</span></p><p class="c0"><span></span></p><p class="c3"><span>ES6 introduces block scope</span></p><ul class="c6 lst-kix_upt3vuci1mnj-0 start"><li class="c7 c3"><span>let</span></li><li class="c7 c3"><span>const</span></li></ul><h3 class="c2" id="h.fqm2m4iw6nki"><span>Const</span></h3><p class="c3"><span>The const declaration creates a read-only reference to a value. (It does not mean the value it holds is immutable, just that the variable identifier cannot be reassigned.)</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">const PI = 3.141593</span></p><p class="c3"><span class="c1">PI &gt; 3.0 //true</span></p><p class="c3"><span class="c1">PI = 3.14 //syntax error</span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">const MY_OBJECT = {&quot;key&quot;: &quot;value&quot;}; //assignment</span></p><p class="c3 c4"><span class="c1">MY_OBJECT = {&quot;OTHER_KEY&quot;: &quot;value&quot;}; //fails</span></p><p class="c4 c3"><span class="c1">MY_OBJECT.key = &quot;otherValue&quot;; //is ok</span></p><h3 class="c2" id="h.8i016728y43m"><span>Let</span></h3><p class="c3"><span>In &nbsp;sctrict-mode only.</span></p><p class="c0"><span></span></p><p class="c3"><span>This is wrong. Why?</span></p><p class="c3"><span class="c1">var callbacks = [];</span></p><p class="c3"><span class="c1">for (var i = 0; i &lt;= 2; i++) {</span></p><p class="c3 c8"><span class="c1">callbacks[i] = function() { return i * 2; };</span></p><p class="c3"><span class="c1">}</span></p><p class="c0"><span></span></p><p class="c3"><span>Correct way to do this in ES5.</span></p><p class="c3"><span class="c1">var callbacks = [];</span></p><p class="c3"><span class="c1">for (var i = 0; i &lt;= 2; i++) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; (function (i) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; callbacks[i] = function() { return i * 2; };</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; })(i);</span></p><p class="c3"><span class="c1">}</span></p><p class="c0"><span></span></p><p class="c3"><span>Much more convinient way in ES6 using `let`.</span></p><p class="c4 c3"><span class="c1">for (let i = 0; i &lt; a.length; i++) {</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; let x = a[i]</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; &hellip;</span></p><p class="c4 c3"><span class="c1">}</span></p><p class="c4 c0"><span class="c1"></span></p><h3 class="c2" id="h.bfg5k3tjtrru"><span>Scoping functions</span></h3><p class="c4 c3"><span class="c1">{</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; function foo () { return 1 }</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; foo() === 1</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; {</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; function foo () { return 2 }</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; foo() === 2</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; foo() === 1</span></p><p class="c4 c3"><span class="c1">}</span></p><h2 class="c2" id="h.38veu2fll9sx"><span>Classes</span></h2><p class="c3"><span>ES6 classes does not add any new object-oriented inheritance models.</span></p><p class="c3"><span>Classes are only syntactial sugar over existing prototype-based inheritance.</span></p><p class="c3"><span>&rarr; clearer and simpler syntax.</span></p><h3 class="c2" id="h.hlgd8rwfjsrh"><span>Defining a class</span></h3><p class="c0"><span></span></p><p class="c3"><span class="c1">class Shape {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; constructor (id, x, y) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; this.id = id</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; this.move(x, y)</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; move (x, y) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; this.x = x</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; this.y = y</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c3"><span class="c1">}</span></p><ul class="c6 lst-kix_qoa7lrcyk9rp-0 start"><li class="c4 c7 c3"><span>`constructor` - a special method initializing object created with `class`. There can be only one constructor.</span></li><li class="c4 c7 c3"><span>constructor may use `super` keyword to call parent constructor (we&rsquo;ll get t that)</span></li></ul><h3 class="c2" id="h.ngxyrxzhvrw1"><span>Static methods</span></h3><p class="c0"><span></span></p><p class="c4 c3"><span class="c1">class Point {</span></p><p class="c4 c3"><span class="c1">&nbsp; </span></p><p class="c4 c3"><span class="c1">&nbsp; constructor(x, y) {</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; this.x = x;</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; this.y = y;</span></p><p class="c4 c3"><span class="c1">&nbsp; }</span></p><p class="c4 c3"><span class="c1">&nbsp; </span></p><p class="c4 c3"><span class="c1">&nbsp; static distance(a, b) {</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; const dx = a.x - b.x;</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; const dy = a.y - b.y;</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; return Math.sqrt(dx*dx + dy*dy);</span></p><p class="c4 c3"><span class="c1">&nbsp; }</span></p><p class="c4 c3"><span class="c1">}</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">var p1 = new Point(1, 2);</span></p><p class="c4 c3"><span class="c1">var p2 = new Point(1, 1);</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">var distance = Point.distance(p1, p2);</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">console.log(distance);</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c9">https://jsbin.com/jarino/edit?js,console</span></p><h3 class="c2" id="h.p45wrx3lay5f"><span>I</span><span>nheritance</span></h3><p class="c3"><span>Sublcassing wiht `extends` keyword.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">class Rectangle extends Shape {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; constructor (id, x, y, width, height) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; super(id, x, y)</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; this.width &nbsp;= width</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; this.height = height</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c3"><span class="c1">}</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">Note: You can also extend an ES5 defined function `class`.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">When used in a constructor, the super keyword appears alone and must be used before the this keyword can be used. This keyword can also be used to call functions on a parent object.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c9">https://jsbin.com/yacode/edit?js,console</span></p><h3 class="c2" id="h.mmvd7sxxhqqy"><span>Getters/Setters</span></h3><p class="c3"><span class="c1">class Rectangle {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; constructor (width, height) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; this._width &nbsp;= width</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; this._height = height</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; set width &nbsp;(width) &nbsp;{ this._width = width &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; get width &nbsp;() &nbsp; &nbsp; &nbsp; { return this._width &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; set height (height) { this._height = height &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; get height () &nbsp; &nbsp; &nbsp; { return this._height &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; get area &nbsp; () &nbsp; &nbsp; &nbsp; { return this._width * this._height }</span></p><p class="c3"><span class="c1">}</span></p><p class="c3"><span class="c1">var r = new Rectangle(50, 20)</span></p><p class="c3"><span class="c1">r.area === 1000; //calls getter</span></p><h2 class="c2" id="h.y9qms9ws5p9k"><span>Arrow functions</span></h2><p class="c3"><span>Arrow function expression</span></p><p class="c4 c3"><span class="c1">(param1, param2, &hellip;, paramN) =&gt; { statements }</span></p><p class="c4 c3"><span class="c1">(param1, param2, &hellip;, paramN) =&gt; expression</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// equivalent to: &nbsp;=&gt; { return expression; }</span></p><ul class="c6 lst-kix_fn2r9e2iql0w-0 start"><li class="c4 c7 c3"><span>are always anonymous</span></li><li class="c4 c7 c3"><span>have shorter syntax (compared to function expressions)</span></li><li class="c4 c7 c3"><span>bind `this` value from outer scope (no self/that/_this or bind needed)</span></li></ul><p class="c0"><span></span></p><p class="c3"><span class="c1">function Person(){</span></p><p class="c3"><span class="c1">&nbsp; this.age = 0;</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">&nbsp; setInterval(() =&gt; {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; this.age++; // |this| properly refers to the person object</span></p><p class="c3"><span class="c1">&nbsp; }, 1000);</span></p><p class="c3"><span class="c1">}</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">var p = new Person();</span></p><h2 class="c2" id="h.s57mwldf8fcx"><span>Promises</span></h2><p class="c3"><span>The Promise object is used for deferred and asynchronous computations. &nbsp;A Promise represents an operation that hasn&#39;t completed yet, but is expected in the future.</span></p><p class="c0"><span></span></p><p class="c3"><span>Another way of thinking about a Promise is as an event listener, on which you can register to listen for an event that lets you know when a task has completed. It&#39;s an event that will only ever fire once, but it can be thought of as an event nonetheless.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">new Promise(...).then(...).then(...).catch(...);</span></p><p class="c0"><span></span></p><p class="c3"><span>Note to event-driven asynchronous programming: </span><span>Primary mechanisms to handle asynchronous events in Javascript are callback functions</span><span>&nbsp;- a piece of code, that is called once an event has occurred.</span></p><p class="c0"><span></span></p><p class="c3"><span>Promises are not about replacing callbacks, but provide an `trustable intermediary` to manage callbacks.</span></p><p class="c0"><span></span></p><p class="c3"><span>A Promise can only have one of two possible resolution outcomes</span></p><ul class="c6 lst-kix_44m3iuh30613-0 start"><li class="c7 c3"><span>fullfilled</span></li><li class="c7 c3"><span>rejected</span></li></ul><p class="c0"><span></span></p><p class="c3"><span class="c1">promise = new Promise((resolve, reject) =&gt; {</span></p><p class="c3"><span class="c1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (ok) {</span></p><p class="c3"><span class="c1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;return resolve(true);</span></p><p class="c3 c8"><span class="c1">}</span></p><p class="c3 c8"><span class="c1">reject(new Error(&lsquo;Not ok&rsquo;));</span></p><p class="c3"><span class="c1">});</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">promise.then(console.log).catch(console.error);</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c3"><span>Promise can be resolved only once and promise once resolved becomes an immutable object.</span></p><p class="c0"><span></span></p><p class="c3"><span>Promise constructor takes a single function, which is called immediately and receives two control functions as arguments. Usually named `resolve` and `reject`.</span></p><ul class="c6 lst-kix_by2n98cuczd6-0 start"><li class="c7 c3"><span>If you call `reject`, the promise is rejected and any value passed to `reject` function is the reason of rejection.</span></li><li class="c7 c3"><span>If you call `resolve` with no value, or any non-promise value, the promise is fullfilled.</span></li><li class="c7 c3"><span>If you call `resolve` and pass another promise, this promise adopts the state of the passed promise.</span></li></ul><h4 class="c2" id="h.rc3f404zyz6k"><span>Chaining</span></h4><p class="c3"><span>Promises have `then` method, that accepts one or two callbacks.</span></p><ul class="c6 lst-kix_fq6btj7vnec0-0 start"><li class="c7 c3"><span>first is trated as the handler to call if promise was fulfilled successfully</span></li><li class="c7 c3"><span>second (if present) is treated as the handler to call if promise is rejected explicitly or any error is caught during execution</span></li></ul><p class="c0"><span></span></p><p class="c3"><span>Shorthand for </span><span class="c1">then(null, errorHandler)</span><span>&nbsp;is </span><span class="c1">catch(handleRejection)</span><span>. Both of `then` and `catch` create a new promise.</span></p><p class="c0"><span></span></p><p class="c3"><span>Note on `thenebles`: Theneble is a promise-like object, that have a `then` method implemented. Thenebles, if not a genuine promise, are not to be trusted, whether in interface promises provide, error handling etc.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">var fakePromise = {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp;then: function(cb) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp;cb(&lsquo;Gotcha!&rsquo;);</span></p><p class="c3"><span class="c1">}</span></p><p class="c4 c3"><span>Useful Promise API</span></p><p class="c4 c0"><span></span></p><ul class="c6 lst-kix_xbn2f5wclfj2-0 start"><li class="c4 c7 c3"><span>Promise.resolve(value). Returns a Promise object that is resolved with the given value.</span></li><li class="c4 c7 c3"><span>Promise.reject(reason). Returns a Promise object that is rejected with the given reason.</span></li><li class="c4 c7 c3"><span>Promise.all(iterable). Returns a promise that either resolves when all passed promises have resolved or rejects as soon as one of the passed promises rejects.</span></li><li class="c4 c7 c3"><span>Promise.race(iterable). Returns a promise that resolves o rejects as soon as any of passed promises resolves or rejects.</span></li></ul><p class="c4 c0"><span></span></p><p class="c4 c3"><span class="c1">var promise1 = Promise.resolve(&#39;value&#39;);</span></p><p class="c4 c3"><span class="c1">var promise2 = Promise.reject(new Error(&#39;reject error&#39;));</span></p><p class="c4 c3"><span class="c1">Promise.all([promise1, promise2])</span></p><p class="c4 c3"><span class="c1">.then(promised =&gt; { //array of resolved values in same order as promises passed</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; console.log(promised[0]);</span></p><p class="c4 c3"><span class="c1">}).catch(err =&gt; { //at least one promise was rejected and error immediatly catched</span></p><p class="c4 c3"><span class="c1">&nbsp; console.error(err);</span></p><p class="c4 c3"><span class="c1">});</span></p><p class="c4 c0"><span></span></p><p class="c4 c0"><span></span></p><p class="c4 c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 222.67px;"><img alt="" src="images/image01.png" style="width: 601.70px; height: 222.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h2 class="c2" id="h.4gsxs8bco663"><span>Collections</span></h2><h3 class="c2" id="h.lbvnfbws0i49"><span>Map, WeakMap</span></h3><p class="c3"><span>The Map object is a simple key/value map. Any value (both objects and primitive values) may be used as either a key or a value.</span></p><p class="c3"><span>API</span></p><ul class="c6 lst-kix_b24v3n72alu5-0 start"><li class="c7 c3"><span>size //number of values</span></li><li class="c7 c3"><span>clear() //removes all key/value pairs</span></li><li class="c7 c3"><span>entries() //Iterator obj for all key/values</span></li><li class="c7 c3"><span>keys()/values()</span></li><li class="c7 c3"><span>set(key, value)</span></li><li class="c7 c3"><span>get(key)</span></li><li class="c7 c3"><span>has(key)</span></li><li class="c7 c3"><span>delete(key)</span></li><li class="c7 c3"><span>forEach(callbackFn)</span></li></ul><p class="c0"><span></span></p><p class="c3"><span>WeakMap: </span></p><ul class="c6 lst-kix_ogo8ft39oax0-0 start"><li class="c7 c3"><span>Primitive datatypes as keys are not allowed.</span></li></ul><ul class="c6 lst-kix_dbici9se59yr-0 start"><li class="c7 c3"><span>Does not prevent entries to be garbage collected if no other reference on key object is kept</span></li></ul><h3 class="c2" id="h.azfnruvxr1ak"><span>Set, WeakSet</span></h3><p class="c3"><span>Stores unique values of any type.</span></p><p class="c3"><span>API similar to Map.</span></p><p class="c3"><span>WeakSet: similart conditions as WeakMap.</span></p><h2 class="c2" id="h.hs2x5btvgkrb"><span>Generators</span></h2><p class="c3"><span>aka `function*`.</span></p><p class="c3"><span>function* declaration defined a generator functoin, returning a Generator object.</span></p><p class="c0"><span></span></p><p class="c4 c3"><span class="c1">function* idMaker(){</span></p><p class="c4 c3"><span class="c1">&nbsp; var index = 0;</span></p><p class="c4 c3"><span class="c1">&nbsp; while(index &lt; 3)</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; yield index++;</span></p><p class="c4 c3"><span class="c1">}</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">var gen = idMaker();</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">console.log(gen.next().value); // 0</span></p><p class="c4 c3"><span class="c1">console.log(gen.next().value); // 1</span></p><p class="c4 c3"><span class="c1">console.log(gen.next().value); // 2</span></p><p class="c4 c3"><span class="c1">console.log(gen.next().value); // undefined</span></p><h2 class="c2" id="h.i16wtb309946"><span>Object.assign</span></h2><p class="c3"><span>Copy values from all sources to target object and returns target object.</span></p><p class="c3"><span class="c1">Object.assign(target, ...sources)</span></p><p class="c0"><span></span></p><p class="c3"><span>Typical usage: cloning objects without modifiing source and passing defaults.</span></p><p class="c4 c3"><span class="c1">var defaults = {</span></p><p class="c4 c3"><span class="c1">&nbsp; param1: true,</span></p><p class="c4 c3"><span class="c1">&nbsp; otherParams: {</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; otherParam1: 13,</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; otherParam2: &#39;Invincible&#39;</span></p><p class="c4 c3"><span class="c1">&nbsp; }</span></p><p class="c4 c3"><span class="c1">}</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">var options = {</span></p><p class="c4 c3"><span class="c1">&nbsp; otherParams: {</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; otherParam1: 42</span></p><p class="c4 c3"><span class="c1">&nbsp; }</span></p><p class="c4 c3"><span class="c1">};</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">var params = Object.assign({}, defaults, options);</span></p><p class="c3"><span>outputs:</span></p><p class="c3"><span class="c1">{</span></p><p class="c3"><span class="c1">&nbsp; otherParams: {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; otherParam1: 42</span></p><p class="c3"><span class="c1">&nbsp; },</span></p><p class="c3"><span class="c1">&nbsp; param1: true</span></p><p class="c3"><span class="c1">}</span></p><p class="c0"><span></span></p><h2 class="c2" id="h.je8vmemibzxr"><span>Spread operator</span></h2><p class="c3"><span>Spread operator (...) allows an expression to be expanded in multiple places:</span></p><ul class="c6 lst-kix_jbf1zkiqoe4u-0 start"><li class="c7 c3"><span>function calls</span></li></ul><p class="c3"><span class="c1">myFunction(...iterableObj); //calls function as myFunction(iterableObj[0], iterableObj[1]...)</span></p><ul class="c6 lst-kix_jbf1zkiqoe4u-0"><li class="c7 c3"><span>array literals</span></li></ul><p class="c3"><span class="c1">[...iterableObj, 4, 5, 6] //resulting in an array of [4,5,6] prefixed with all elements in iterableObj</span></p><ul class="c6 lst-kix_jbf1zkiqoe4u-0"><li class="c7 c3"><span>destructuring assignment</span></li></ul><p class="c4 c3"><span class="c1">[a, b, ...iterableObj] = [1, 2, 3, 4, 5]; //a:=1, b:=2, iterableObj[0]:=3, iterableObj[1]:=4 ...</span></p><p class="c0"><span></span></p><p class="c3"><span>Rest argument in functions</span></p><p class="c3"><span class="c1">function f (x, y, ...a) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; return (x + y) * a.length</span></p><p class="c3"><span class="c1">}</span></p><p class="c3"><span class="c1">f(1, 2, 3, 4, 5) === 9</span></p><h1 class="c2" id="h.qf29khlye3go"><span>ES7</span></h1><p class="c3"><span>ES2016 / ES7, next evolution of ECMA standard. Still in progress.</span></p><ul class="c6 lst-kix_zfot4kvz3ssh-0 start"><li class="c7 c3"><span>Object.values/Object.entries</span></li></ul><ul class="c6 lst-kix_zfot4kvz3ssh-1 start"><li class="c3 c11"><span>for consistency with Object.keys</span></li></ul><ul class="c6 lst-kix_zfot4kvz3ssh-0"><li class="c7 c3"><span>Array.prototype.includes</span></li></ul><ul class="c6 lst-kix_zfot4kvz3ssh-1 start"><li class="c3 c11"><span>that we wont need to check for it like array.indexOf(value) &gt; -1</span></li></ul><ul class="c6 lst-kix_zfot4kvz3ssh-0"><li class="c7 c3"><span>Exponential operator **</span></li></ul><ul class="c6 lst-kix_zfot4kvz3ssh-1 start"><li class="c3 c11"><span>x ** y === Math.pow(x, y)</span></li></ul><ul class="c6 lst-kix_zfot4kvz3ssh-0"><li class="c7 c3"><span>Async functions</span></li></ul><ul class="c6 lst-kix_zfot4kvz3ssh-1 start"><li class="c3 c11"><span>with async functions, you can wait on a promise, and wait for the resolves value in a non blocking way</span></li></ul><p class="c0"><span></span></p><p class="c3"><span class="c1">g</span><span class="c1">etJSON(&#39;story.json&#39;).then(function(story) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; addHtmlToPage(story.heading);</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &hellip;</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">let story = await getJSON(&#39;story.json&#39;);</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; addHtmlToPage(story.heading);</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; ...</span></p><p class="c0"><span></span></p><ul class="c6 lst-kix_zfot4kvz3ssh-0"><li class="c7 c3"><span>Rest/spread properties</span></li></ul><p class="c4 c3"><span class="c1">let { x, y, ...z } = { x: 1, y: 2, a: 3, b: 4 };</span></p><p class="c4 c3"><span class="c1">x; // 1 </span></p><p class="c4 c3"><span class="c1">y; // 2 </span></p><p class="c4 c3"><span class="c1">z; // { a: 3, b: 4 }</span></p><ul class="c6 lst-kix_3q04d9q1ru48-0 start"><li class="c7 c3"><span>Decorators - allows modifying classes and properties at design time.</span></li></ul><p class="c3"><span class="c1">function readonly(target, name, descriptor){</span></p><p class="c3"><span class="c1">&nbsp; descriptor.writable = false;</span></p><p class="c3"><span class="c1">&nbsp; return descriptor;</span></p><p class="c3"><span class="c1">}</span></p><p class="c3"><span>and usage</span></p><p class="c4 c3"><span class="c1">class Person {</span></p><p class="c4 c3"><span class="c1">&nbsp; @readonly &nbsp; </span></p><p class="c4 c3"><span class="c1">&nbsp; name() { return `${this.first} ${this.last}` } </span></p><p class="c4 c3"><span class="c1">}</span></p><p class="c0"><span></span></p><p class="c0"><span></span></p><ul class="c6 lst-kix_zfot4kvz3ssh-0"><li class="c7 c3"><span>Object observable</span></li></ul><p class="c3"><span class="c1">var obj = {};</span></p><p class="c3"><span class="c1">Object.observe( obj,function(changes) {console.log(changes);} );</span></p><p class="c3"><span class="c1">obj.name = &quot;hemanth&quot;;</span></p><p class="c3"><span class="c1">//[ { type: &#39;new&#39;, object: { name: &#39;hemanth&#39; }, name: &#39;name&#39; } ]</span></p><ul class="c6 lst-kix_igor9q5zmp1-0 start"><li class="c7 c3"><span>Typed objects - Portable, memory-safe, efficient, and structured access to contiguously allocated data.</span></li></ul><p class="c3"><span class="c1">var Point = new StructType({</span></p><p class="c3"><span class="c1">&nbsp; x: int32,</span></p><p class="c3"><span class="c1">&nbsp; y: int32</span></p><p class="c3"><span class="c1">});</span></p><p class="c3"><span class="c1">var point = new Point({</span></p><p class="c3"><span class="c1">&nbsp; x: 42,</span></p><p class="c3"><span class="c1">&nbsp; y: 420</span></p><p class="c3"><span class="c1">});</span></p><ul class="c6 lst-kix_t0eo4rapitya-0 start"><li class="c7 c3"><span>SIMD (Single Instruction Multiple Data) operations. Allows you to perform an operation of several values at once.</span></li></ul><p class="c4 c3"><span class="c1">var a = SIMD.Float32x4(1.0, 2.0, 3.0, 4.0);</span></p><p class="c4 c3"><span class="c1">var b = SIMD.Float32x4(5.0, 10.0, 15.0, 20.0);</span></p><p class="c4 c3"><span class="c1">var c = SIMD.Float32x4.add(a,b);</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 596.97px; height: 341.50px;"><img alt="" src="images/image00.png" style="width: 596.97px; height: 341.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c1">function average(list) {</span></p><p class="c3"><span class="c1">&nbsp; var n = list.length;</span></p><p class="c3"><span class="c1">&nbsp; var sum = SIMD.Float32x4.splat(0.0);</span></p><p class="c3"><span class="c1">&nbsp; for (var i = 0; i &lt; n; i += 4) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; sum = SIMD.Float32x4.add(sum,</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SIMD.Float32x4.load(list, i));</span></p><p class="c3"><span class="c1">&nbsp; }</span></p><p class="c3"><span class="c1">&nbsp; var total = SIMD.Float32x4.extractLane(sum, 0) +</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SIMD.Float32x4.extractLane(sum, 1) +</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SIMD.Float32x4.extractLane(sum, 2) +</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SIMD.Float32x4.extractLane(sum, 3);</span></p><p class="c3"><span class="c1">&nbsp; return total / n;</span></p><p class="c3"><span class="c1">}</span></p><p class="c0"><span></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 650.77px; height: 254.50px;"><img alt="" src="images/image03.png" style="width: 650.77px; height: 254.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c18"><a class="c17" href="https://www.google.com/url?q=https://github.com/tc39/ecma262&amp;sa=D&amp;ust=1461655421043000&amp;usg=AFQjCNFoEaxSuuw471YtKOyRmNc451S5xA">https://github.com/tc39/ecma262</a></span></p><p class="c0"><span></span></p><p class="c2 title" id="h.xvmomx7ytvon"><span>Node.js</span></p><h1 class="c2" id="h.2kbs979cper2"><span>Introduction</span></h1><p class="c3"><span>&ldquo;Node.js&reg; is a JavaScript runtime built on Chrome&#39;s V8 JavaScript engine. Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient. Node.js&#39; package ecosystem, npm, is the largest ecosystem of open source libraries in the world.&rdquo;</span></p><p class="c0"><span></span></p><ul class="c6 lst-kix_az99txz5znnd-0 start"><li class="c7 c3"><span>Built on top of Chrome&rsquo;s Javascript runtime.</span></li><li class="c7 c3"><span>Asynchronous and Event driven. All APIs for Node are asynchronous = non-blocking.</span></li></ul><ul class="c6 lst-kix_az99txz5znnd-1 start"><li class="c3 c11"><span>Node js server never waits for an API to return data, but rather moves to next API call after calling the first, using notiification mechanism of Events. More on that later in Event loop.</span></li></ul><ul class="c6 lst-kix_az99txz5znnd-0"><li class="c7 c3"><span>Single threaded and hihgly scalable. </span></li></ul><ul class="c6 lst-kix_az99txz5znnd-1 start"><li class="c3 c11"><span>Node uses a single threaded model with event looping. The event mechanism helps to respond in non blocking way as opposed to traditional servers, which create limited threads to handle requests. A single threaded program in Node can provide service to a much larger number of requests compared to same program that runs on traditional servers like Apache HTTP Server.</span></li></ul><ul class="c6 lst-kix_az99txz5znnd-0"><li class="c7 c3"><span>No buffering.</span></li></ul><ul class="c6 lst-kix_az99txz5znnd-1 start"><li class="c3 c11"><span>Node.js application never buff any data. These applications simply output the data in chunks.</span></li></ul><ul class="c6 lst-kix_az99txz5znnd-0"><li class="c7 c3"><span>MIT License.</span></li></ul><p class="c0"><span></span></p><p class="c3"><span>Is used in in number of known projects: eBay, General Electric, GoDaddy, Microsoft, PayPal, Uber, Wikipins, Yahoo!, and Yammer to name a few.</span></p><p class="c0"><span></span></p><h2 class="c2" id="h.9vuwwgrpmhir"><span>Where to use</span></h2><ul class="c6 lst-kix_48iho2cr90yo-0 start"><li class="c7 c3"><span>I/O bound Applications&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="c7 c3"><span>Data Streaming Applications</span></li><li class="c7 c3"><span>Data Intensive Real time Applications (DIRT)</span></li><li class="c7 c3"><span>JSON APIs based Applications</span></li><li class="c7 c3"><span>Single Page Applications</span></li></ul><h2 class="c2" id="h.c4evcat344g5"><span>Where not to use</span></h2><p class="c3"><span>It is not advisable to use Node.js for CPU intensive applications.</span></p><h2 class="c2" id="h.85vrlvowg9fb"><span>Asynchronous and Event driven</span></h2><p class="c3"><span>Reminder: callback = a function that is called at the completion of given task.</span></p><p class="c0"><span></span></p><p class="c0"><span></span></p><p class="c3"><span>Synchronous</span></p><p class="c3"><span class="c1">var data = readFileSync(file);</span></p><p class="c3"><span class="c1">//handle data </span></p><p class="c3"><span>Asynchronous</span></p><p class="c4 c3"><span class="c1">readFileAsync(file, function(data) { </span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp;//handle data </span></p><p class="c4 c3"><span class="c1">}</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span>Part of Javascript runtime is an event queue, containing a list of messages and their associated callback functions. </span></p><p class="c4 c0"><span></span></p><p class="c4 c3"><span class="c5">These messages are queued in response to external events (such as a mouse being clicked or receiving the response to an HTTP request) given a callback function has been provided. If, for example a user were to click a button and no callback function was provided &ndash; no message would have been enqueued.</span></p><p class="c4 c0"><span class="c5"></span></p><p class="c4 c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 242.67px;"><img alt="" src="images/image02.png" style="width: 601.70px; height: 242.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c4 c0"><span class="c5"></span></p><p class="c3"><span>In a loop, the queue is polled for the next message (each poll referred to as a &ldquo;tick&rdquo;) and when a message is encountered, the callback for that message is executed.</span></p><p class="c0"><span></span></p><p class="c3"><span>This makes Node.js highly scalable, as it can process high number of request without waiting for any function to return result.</span></p><h3 class="c2" id="h.j1cpkxads6ec"><span>Common callback-only approach pitfalls and tips</span></h3><ul class="c6 lst-kix_31hzx6hp66dr-0 start"><li class="c7 c3"><span>make CPU intensive tasks in chunks if possible, otherwise entire server is blocked</span></li><li class="c7 c3"><span>dont forget to call callback when task is finished</span></li><li class="c7 c3"><span>dont forget to handle errors before passing results to another callback</span></li><li class="c7 c3"><span>good practice is to create callbacks that take first argument as error from processed task, and if neccessary, callback as last</span></li></ul><p class="c0"><span></span></p><p class="c3"><span class="c10">[TASK t1-node-argv]</span></p><h2 class="c2" id="h.xb9ttcut3cj4"><span>Node and dependencies</span></h2><p class="c3"><span class="c14">Note on package system</span><span>: Node follows the ComonJS module system, using built in `require` function to include modules, that exist in separate files. `require` reads a javscript file, executes the file and returns the `exports` object.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c5">CommonJS is a project with the goal of specifying an ecosystem for JavaScript outside the browser (for examp</span><span class="c5">le, on </span><span class="c5">the server or for native desktop applications).</span></p><p class="c0"><span></span></p><p class="c3"><span>Package manager and repository of packages that you can use in Node is NPM. NPM </span><span>comes bundled with Node.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">npm install &lt;Package&gt;</span></p><p class="c0"><span></span></p><p class="c3"><span>Installs Package in one of either</span></p><ul class="c6 lst-kix_4t9z9wdwsk1j-0 start"><li class="c7 c3"><span class="c1">./node_modules</span><span>&nbsp;for local packages</span></li><li class="c7 c3"><span class="c1">path/to/user/data/npm/node_modules</span><span>&nbsp;for global packages (if -g option specified)</span></li></ul><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">npm install</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span>Installs dependent packages specified in package.json.</span></p><h2 class="c2" id="h.kyf53ahfpzh0"><span>Package.json</span></h2><p class="c3"><span>A file that contains a single JSON object wrapping set of package options.</span></p><p class="c3"><span>Notable are</span></p><ul class="c6 lst-kix_2z3wo3dq6fmt-0 start"><li class="c7 c3"><span>name. Name of your application/package.</span></li><li class="c7 c3"><span>version. Application version.</span></li><li class="c7 c3"><span>dependencies. Object defining dependencies of your application. Key: package name, Value: supported version. Example: &quot;bcryptjs&quot;: &quot;^2.3.0&quot;</span></li><li class="c7 c3"><span>scripts. Object defining scripts that can be run with `npm run &lt;Script&gt;`. Key: script name identifier, Value: command to run. Example: &quot;start&quot;: &quot;node server.js&quot;,</span></li><li class="c3 c7"><span>devDependencies. Dependencie that are installed when not in production mode.</span></li></ul><p class="c0"><span></span></p><p class="c3"><span>Example </span><span>package.json</span></p><p class="c3"><span class="c1">{</span></p><p class="c3"><span class="c1">&nbsp;&quot;name&quot;: &quot;Hello world&quot;,</span></p><p class="c3"><span class="c1">&nbsp;&quot;version&quot;: &quot;1.0.0&quot; ,</span></p><p class="c3"><span class="c1">&nbsp;&quot;scripts&quot;: {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &quot;start&quot;: &quot;node server.js&quot;</span></p><p class="c3"><span class="c1">&nbsp; },</span></p><p class="c3"><span class="c1">&nbsp; &quot;dependencies&quot;: {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &quot;accept-language&quot;: &quot;^2.0.16&quot;,</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &quot;async&quot;: &quot;1.3.0&quot;,</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &quot;bcryptjs&quot;: &quot;^2.3.0&quot;</span></p><p class="c3"><span class="c1">&nbsp; }</span></p><p class="c3"><span class="c1">}</span></p><p class="c0"><span></span></p><p class="c3"><span>NPM script provides interface to the application. For example `start` is supposed to start the application, `stop` to stop, `restart`, `postinstall`, `preinstall`.</span></p><h2 class="c2" id="h.iny0v517z5k7"><span>Module usage and native modules</span></h2><p class="c3"><span>Some modules are provided by default through Node API.</span></p><ul class="c6 lst-kix_rouvg9ehyyqu-0 start"><li class="c7 c3"><span>fs. File I/O, wrapper around standart POSIX functions.</span></li></ul><ul class="c6 lst-kix_7jmsqlb8j2ly-0 start"><li class="c7 c3"><span>crypto. Cryptographic functionalinty, wrappers for OpenSSL&rsquo;s hash, HMAC, cipher, decipher..</span></li><li class="c7 c3"><span>http. Interface designed to support features of HTTP protocol.</span></li><li class="c7 c3"><span>and more..</span></li></ul><p class="c0"><span></span></p><p class="c4 c3"><span class="c1">var crypto = require(&#39;crypto&#39;);</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">var hash = crypto.createHmac(&#39;sha256&#39;, &#39;NotASecret&#39;)</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .update(&#39;I love Node.&#39;)</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .digest(&#39;hex&#39;);</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">console.log(hash);</span></p><p class="c0"><span class="c10"></span></p><p class="c3"><span class="c10">[TASK t2-http-simple]</span></p><h1 class="c2" id="h.4s1nbgomhey"><span>REST API, Express</span></h1><p class="c3"><span>Express is a minimal and flexible Node.js web application framework that provides a robust set of features for web and mobile applications.</span></p><p class="c0"><span></span></p><p class="c3"><span>A simplest single file express app:</span></p><p class="c3"><span class="c1">var express = require(&#39;express&#39;);</span></p><p class="c3"><span class="c1">var app = express();</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">app.get(&#39;/&#39;, function (req, res) {</span></p><p class="c3"><span class="c1">&nbsp; res.send(&#39;Hello World!&#39;);</span></p><p class="c3"><span class="c1">});</span></p><h2 class="c2" id="h.9ul1nar1w8f7"><span>Routing</span></h2><p class="c3"><span>Route definition:</span></p><p class="c3"><span class="c1">app.METHOD(PATH, HANDLER)</span></p><ul class="c6 lst-kix_vmm61z2vdfuo-0 start"><li class="c7 c3"><span>METHOD is an HTTP reques method, i.e. `get`, `put`, `post`, &hellip;, or `all` for all methods.</span></li><li class="c7 c3"><span>PATH is a path on the server</span></li><li class="c7 c3"><span>HANDLER function that is executed when the route is matched. By convetion, fist argument passed represents HTTP Request, usually named `req`, second HTTP Response, usually named `res`.</span></li></ul><p class="c0"><span></span></p><p class="c3"><span class="c1">app.delete(&#39;/user&#39;, function (req, res) {</span></p><p class="c3"><span class="c1">&nbsp; res.send(&#39;Got a DELETE request at /user&#39;);</span></p><p class="c3"><span class="c1">});</span></p><p class="c0"><span class="c1"></span></p><h3 class="c2" id="h.wwfilybk2935"><span>Request</span></h3><p class="c3"><span>Representation of current HTTP request.</span></p><p class="c3"><span>Notable properites</span></p><ul class="c6 lst-kix_4ksv5k89mk7o-0 start"><li class="c7 c3"><span>app. Reference to Express app.</span></li><li class="c7 c3"><span>baseUrl. URL path on which a router was mounted.</span></li><li class="c7 c3"><span>body. Key-value pairs of data submitted in request body. Undefined by default, but populated when you use body-parsing middleware (body-parser, multer)</span></li></ul><p class="c3"><span class="c5">Truly minimal framework, as it doesnt support json body parsing by default.</span></p><ul class="c6 lst-kix_hh9zpd2sp2j5-0 start"><li class="c7 c3"><span>query. Parsed query string.</span></li><li class="c7 c3"><span>params. Route wildcards.</span></li></ul><h3 class="c2" id="h.mspvsgpqfgj3"><span>Route params</span></h3><p class="c3"><span>= wildcards in URL.</span></p><p class="c3"><span class="c1">&nbsp;/user/:name</span></p><p class="c3"><span>Matches for example URL</span><span class="c1">&nbsp;/user/unicorn</span><span>. `unicorn` is then passed as param `name` to Request object and can be accessed in route handler as</span></p><p class="c3"><span class="c1">req.params.name</span></p><h3 class="c2" id="h.ssk86yduu22b"><span>Query strings</span></h3><p class="c3"><span>Query strings are not part of the route path. They can be obtained through `req` object</span></p><p class="c3"><span class="c1">req.query</span></p><p class="c3"><span>Returns an automatically parsed object, where keys are the names of query string variables and values their values.</span></p><p class="c3"><span class="c1">/route?a=1&amp;b=one&amp;c[]=x&amp;c[]=y</span></p><p class="c3"><span class="c1">req.query = {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp;a: &quot;1&quot;,</span></p><p class="c3"><span class="c1">&nbsp; &nbsp;b: &quot;one&quot;,</span></p><p class="c3"><span class="c1">&nbsp; &nbsp;c: [&quot;x&quot;, &quot;y&quot;]</span></p><p class="c3"><span class="c1">}</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c10">[TASK t3-express]</span></p><p class="c0"><span class="c10"></span></p><h3 class="c2" id="h.ajmlvx7u9fvw"><span>Middlewares</span></h3><p class="c3"><span>So far, Express lookls like an enhanced router. But it&rsquo;s much more than that in functionality.</span></p><p class="c3"><span>An express application is basically a series of middleware function calls.</span></p><p class="c0"><span></span></p><p class="c3"><span>Middleware functions are functions that have access to request object (`req`), response object (`req`) and next middleware function in current request-response cycle. Next-middleware-function is commonly named `next`.</span></p><p class="c0"><span></span></p><p class="c3"><span>Middleware function can </span></p><ul class="c6 lst-kix_opkv2h7ffxg6-0 start"><li class="c7 c3"><span>execute any code,</span></li><li class="c7 c3"><span>Make changes to request and response objects,</span></li><li class="c7 c3"><span>End the request-response lifecycle,</span></li><li class="c7 c3"><span>Call the next middleware.</span></li></ul><p class="c0"><span></span></p><p class="c3"><span>A middleware must end the request-response cycle (=ends the response stream), or must pass control to next middleware. Otherwise the request will be left hanging.</span></p><p class="c0"><span></span></p><p class="c3"><span>Middleware pipeline</span></p><p class="c3"><span class="c1">app.get(route, middleware1, middleware2, &hellip;, handler)</span></p><p class="c0"><span></span></p><p class="c3"><span>Basic middleware types</span></p><ul class="c6 lst-kix_2jsv4464cs7-0 start"><li class="c7 c3"><span>Application-level</span></li><li class="c7 c3"><span>Router-level</span></li><li class="c7 c3"><span>Error-handling</span></li></ul><h4 class="c2" id="h.rpvfzqhjj6l6"><span>Application-level middleware</span></h4><p class="c3"><span>Bound to `app` using app.use, or app.METHOD</span></p><p class="c3"><span class="c1">app.use(&#39;/user/:id&#39;, function (req, res, next) {</span></p><p class="c3"><span class="c1">&nbsp; console.log(&#39;Request Type:&#39;, req.method);</span></p><p class="c3"><span class="c1">&nbsp; next();</span></p><p class="c3"><span class="c1">});</span></p><h4 class="c2" id="h.ua04sh7aaasf"><span>Router-level middleware</span></h4><p class="c3"><span>Router level middle ware works in the same way as application-level middleware, except it is bound to an instance of express.Router().</span></p><p class="c3"><span class="c1">var router = express.Router();</span></p><p class="c3"><span class="c1">app.use(&#39;/&#39;, router); //mounting the router</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">router.use(fn)</span><span>&nbsp;-- fn is a middleware called every request to the router.</span></p><p class="c0"><span></span></p><p class="c3"><span>Router-level middleware may call `next(&lsquo;route&rsquo;)` to pass control to the next matching route.</span></p><h4 class="c2" id="h.ungd93if2nf1"><span>Error-handling middleware</span></h4><p class="c3"><span>Special type of middleware that </span><span>always takes </span><span class="c14">four </span><span>arguments (otherwise its treated as ordinary middleware). Signature of error handling middleware is (error, req, res, next).</span></p><p class="c3"><span class="c1">app.use(function(err, req, res, next) {</span></p><p class="c3"><span class="c1">&nbsp; console.error(err.stack);</span></p><p class="c3"><span class="c1">&nbsp; res.status(500).send(&#39;Something broke!&#39;);</span></p><p class="c3"><span class="c1">});</span></p><h4 class="c2" id="h.ovwcgsgtvco2"><span>Third-party middleware</span></h4><p class="c3"><span>Middleware that adds functionanilty to Express apps.</span></p><p class="c3"><span>Install as a node module, then load into yout app at the application or router level.</span></p><p class="c0"><span></span></p><p class="c3"><span>Example Cookie parser: Populates req.cookies with data parsed from Cookie header.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">var express = require(&#39;express&#39;);</span></p><p class="c3"><span class="c1">var app = express();</span></p><p class="c3"><span class="c1">var cookieParser = require(&#39;cookie-parser&#39;);</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">// load the cookie-parsing middleware</span></p><p class="c3"><span class="c1">app.use(cookieParser());</span></p><p class="c0"><span></span></p><p class="c3"><span>Then the `req.cookies` contains object keyed by the cookie names.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c10">[TASK t4-express-node-template]</span></p><p class="c3"><span class="c5">Klasicka puvodni node template, odpojeny mongo a csrf. Vse je k nalezeni v config/routes a config/api.</span></p><ul class="c6 lst-kix_7j6icgh7pbn6-0 start"><li class="c7 c3"><span class="c10">Task1: Implement an POST /notes endpoint, that will add note passed in request body (entire object)</span></li><li class="c7 c3"><span class="c10">Task2: Implement an DELETE /notes/&lt;note&gt; endpoint, that will delete note object from storage that passes condition where `note` === &lt;note&gt;</span></li><li class="c7 c3"><span class="c10">BonusTask 2.5: add a middleware on POST /notes, so it validates the request body and checks for `note` property. If its not present in body, return HTTP status 400 and appropriate message. Otherwise pass the request on to next middleware in pipeline.</span></li><li class="c7 c3"><span class="c10">Try calling next with/without arguments and examine the middleware error handler. What happens?</span></li></ul><h2 class="c2" id="h.6cfdz19e0r2u"><span>Asynchronous paradigm</span></h2><p class="c3"><span>In one threaded execution environment, like NodeJs, you have to be careful of what you do synchronously, otherwise your application stops responding to other requests.</span></p><p class="c0"><span></span></p><p class="c3"><span>Code is executed in smaller blocks of execution - which is a function block. A function is a smallest piece of code that will run as a whole.</span></p><p class="c0"><span></span></p><p class="c3"><span>Consider:</span></p><p class="c4 c3"><span class="c1">function f() {</span></p><p class="c4 c3"><span class="c1">&nbsp; console.log(&quot;foo&quot;);</span></p><p class="c4 c3"><span class="c1">&nbsp; setTimeout(function(){console.log(&quot;bar&quot;);}, 0);</span></p><p class="c4 c3"><span class="c1">&nbsp; console.log(&quot;baz&quot;);</span></p><p class="c4 c3"><span class="c1">&nbsp; h();</span></p><p class="c4 c3"><span class="c1">}</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">function h() { console.log(&quot;blix&quot;);</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">f();</span></p><p class="c0"><span></span></p><p class="c3"><span class="c5">Correct order: foo, baz, blix, bar. As we run f(), foo is logged, setTimeout an event that will occurr at least 0 milliseconds after this call, then baz is logged, h() is called and blix is logged, and on the next tick, anonymous function in setTimeout is called.</span></p><p class="c0"><span class="c5"></span></p><p class="c3"><span>When working with asynchronous calls (HTTP requests, database queries, file reads..), you always have to wait for the result. Async functions dont return value directly, but rather call you back with callback function you provide.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">//wrong!! data will be undefined or some garbage</span></p><p class="c3"><span class="c1">var data = fetchDataAsync(...)</span></p><p class="c3"><span class="c1">//correct </span></p><p class="c3"><span class="c1">fetchDataAsync(function(data) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp;//data</span></p><p class="c3"><span class="c1">})</span></p><p class="c0"><span class="c1"></span></p><h4 class="c2" id="h.etp90q59a3md"><span>Callback hell</span></h4><p class="c3"><span>A problem you will encounter with this callback-only approach is that if you&rsquo;re chaining multiple callbacks, you have to do it like this:</span></p><p class="c3"><span class="c1">doAsync1(function () {</span></p><p class="c3"><span class="c1">&nbsp; doAsync2(function () {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; doAsync3(function () {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; doAsync4(function () {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; })</span></p><p class="c3"><span class="c1">&nbsp; })</span></p><p class="c3"><span class="c1">})</span></p><p class="c3"><span>This code is hard to read, hard to change. And it only calls certain async functions on correct order, always waiting for the previous one to finish. No error handling or other logic. This structure is called `callback hell` or `pyramid of doom`.</span></p><p class="c0"><span></span></p><p class="c3"><span>Callback hell can be rewritten using newer and more comfortable approach - Promises.</span></p><p class="c0"><span></span></p><p class="c3"><span>Promises are natively supported in ES6 and shiped to Node, but there are two major libraries that are widely used and can be used in browser safely:</span></p><ul class="c6 lst-kix_qccpe81twdhx-0 start"><li class="c7 c3"><span>Bluebird,</span></li><li class="c7 c3"><span>Q.</span></li></ul><h4 class="c2" id="h.aoa2hoe5h3j4"><span>Solving callback-hell, common promise patterns</span></h4><p class="c4 c3"><span>Let the async functions return promises, you can then rewrite this code to something less nested:</span></p><p class="c4 c3"><span class="c1">doAsync1()</span></p><p class="c4 c3"><span class="c1">.then(doAsync2)</span></p><p class="c4 c3"><span class="c1">.then(doAsync3)</span></p><p class="c4 c3"><span class="c1">.catch(handleError);</span></p><p class="c0"><span></span></p><p class="c3"><span>Another example:</span></p><p class="c3"><span class="c1">doAsync1()</span></p><p class="c3"><span class="c1">.then(doAsync2)</span></p><p class="c3"><span class="c1">.then(doAsync3)</span></p><p class="c3"><span class="c1">.then((dataFromPrevPromise =&gt; {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp;throw new Error(</span><span class="c1">&#39;error&#39;);</span></p><p class="c3"><span class="c1">&nbsp; &nbsp;return </span><span class="c13">&#39;</span><span class="c1">ok</span><span class="c13">&#39;;</span></p><p class="c3"><span class="c1">})</span></p><p class="c3"><span class="c1">.then(message =&gt; {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp;console.log(message);</span></p><p class="c3"><span class="c1">})</span></p><p class="c4 c3"><span class="c1">.catch(err =&gt; {</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp;if (err.message === </span><span class="c1">&#39;error&#39;) {</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; &nbsp; return &#39;ok&#39; //its our error, thats ok</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp;}</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp;throw err;</span></p><p class="c4 c3"><span class="c1">});</span></p><ul class="c6 lst-kix_tzspx2wq1yap-0 start"><li class="c7 c3"><span>A value returned in `then` handler is passed as result of a promise.</span></li><li class="c4 c7 c3"><span>If an error occurrs, all next `then`s are skipped to catch, which can handle the error and change the state of chained promise to be fulfilled with returning any value</span></li></ul><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c14">Notes on errors</span><span>: </span></p><ul class="c6 lst-kix_4ae848so2i63-0 start"><li class="c4 c7 c3"><span>Although Javascript has try...catch, it is not able to catch only some types of errors. In example above is shown a common way to solve this: catch all errors, handle the ones I want and throw the other ones again.</span></li><li class="c4 c7 c3"><span>All errors should be of type default Error class JS provides.</span></li></ul><h3 class="c2" id="h.x24r5oh216p7"><span>Next tick</span></h3><p class="c3"><span>Remind the setTimeout function what id does and how node handles it: runs all code in which is setTimeout called, and on the next tick, callback function of setTimeout is called. That means, if there were any other events stacked on the Node event queue, they can be handled in between your synchronous code and the asynchronous call - server can handle another requests while it waits for I/O of your async operation.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">function compute() {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; // performs complicated calculations continuously for a while</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; // ...</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; process.nextTick(compute);</span></p><p class="c3"><span class="c1">}</span></p><p class="c3"><span class="c1">http.createServer(function(req, res) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp;res.writeHead(200, {&#39;Content-Type&#39;: &#39;text/plain&#39;});</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp;res.end(&#39;Hello World&#39;);</span></p><p class="c3"><span class="c1">}).listen(5000, &#39;127.0.0.1&#39;);</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">compute();</span></p><p class="c3"><span>This pattern allows the server to do CPU intensive task, while the server still responds to requests between the calculation callbacks. Without the nextTick, compute will just recursively call it self without interleaving it with other functions.</span></p><h2 class="c2" id="h.s4so878nlea"><span>Modules</span></h2><p class="c3"><span>//TODO LIBOR</span></p><p class="c0"><span></span></p><p class="c3"><span class="c10">[TASK]</span></p><p class="c3"><span class="c5">Vych&aacute;z&iacute; z t4-express-node-template-solution.</span></p><ol class="c6 lst-kix_vkubbxfxchhz-0 start" start="1"><li class="c7 c3"><span class="c5">Udelat jednu metodu v MemoryStorage asynchronn&#283; (pomoc&iacute; setTimeout 0, nebo process.nextTick) callbackem</span></li><li class="c7 c3"><span class="c5">Pak promisou.</span></li><li class="c7 c3"><span class="c5">Moduly facade a controller, upraveni config routes/api.js</span></li></ol><p class="c3"><span class="c5">Vysledek je v t5-modules-promises-solution</span></p><h2 class="c2" id="h.tw5tqzx8ifj7"><span>Mongoose</span></h2><p class="c3"><span>Mongoose is a MongoDB object modeling tool designed to work in an asynchronous environment.</span></p><p class="c0"><span></span></p><p class="c3"><span>&ldquo;Mongoose provides a straight-forward, schema-based solution to model your application data. It includes built-in type casting, validation, query building, business logic hooks and more, out of the box.&rdquo;</span></p><h3 class="c2" id="h.jb40osf7tia0"><span>Getting started</span></h3><p class="c3"><span>npm install mongoose</span></p><p class="c0"><span></span></p><p class="c3"><span>var mongoose = require(&#39;mongoose&#39;);</span></p><p class="c3"><span>mongoose.connect(&#39;mongodb://localhost/test&#39;);</span></p><h4 class="c2" id="h.6q1zhcu39ori"><span>Schema, model</span></h4><p class="c3"><span>Everything in Mongoose starts with a Schema. Each schema mnaps to a MongoDB collection and defines the shape of documents within that collection.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">var mongoose = require(&#39;mongoose&#39;);</span></p><p class="c3"><span class="c1">var Schema = mongoose.Schema;</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">var blogSchema = new Schema({</span></p><p class="c3"><span class="c1">&nbsp; title: &nbsp;String,</span></p><p class="c3"><span class="c1">&nbsp; author: String,</span></p><p class="c3"><span class="c1">&nbsp; body: &nbsp; String,</span></p><p class="c3"><span class="c1">&nbsp; comments: [{ body: String, date: Date }],</span></p><p class="c3"><span class="c1">&nbsp; date: { type: Date, default: Date.now },</span></p><p class="c3"><span class="c1">&nbsp; hidden: Boolean,</span></p><p class="c3"><span class="c1">&nbsp; meta: {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; votes: Number,</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; favs: &nbsp;Number</span></p><p class="c3"><span class="c1">&nbsp; }</span></p><p class="c3"><span class="c1">});</span></p><p class="c3"><span class="c1">mongoose.model(&#39;Blog&#39;, blogSchema);</span></p><p class="c0"><span></span></p><p class="c3"><span>Mongoose schema types:</span></p><ul class="c6 lst-kix_d214tla0wawn-0 start"><li class="c7 c3"><span>String</span></li><li class="c7 c3"><span>Number</span></li><li class="c7 c3"><span>Date</span></li><li class="c7 c3"><span>Buffer</span></li><li class="c7 c3"><span>Boolean</span></li><li class="c7 c3"><span>Mixed</span></li><li class="c7 c3"><span>ObjectId</span></li><li class="c7 c3"><span>Array, typed Array</span></li></ul><h4 class="c2" id="h.j8iibcbvo2c8"><span>Methods, Statics</span></h4><p class="c3"><span>TODO</span></p><h4 class="c2" id="h.b1bzbbn76b"><span>Serialilzation</span></h4><p class="c3"><span class="c1">blogSchema.options.toJSON = {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; transform: function(document, ret, options) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; ret.id = ret._id;</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; delete ret._id;</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; delete ret._event;</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; delete ret.__v;</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; return ret;</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c3"><span class="c1">};</span></p><p class="c0"><span></span></p><h4 class="c2" id="h.sjk5jm20q8re"><span>Hooks</span></h4><p class="c3"><span>You can hoow pre and post events on schemas.</span></p><ul class="c6 lst-kix_mpwgtxiv3kp9-0 start"><li class="c7 c3"><span>init</span></li><li class="c7 c3"><span>validate</span></li><li class="c7 c3"><span>save</span></li><li class="c7 c3"><span>remove</span></li><li class="c7 c3"><span>update</span></li></ul><p class="c3"><span class="c1">performerSchema.pre(&quot;save&quot;,function (next) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; if(this.isNew) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; ...do something if is new &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; next();</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; } else {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; next();</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c3"><span class="c1">});</span></p><p class="c0"><span></span></p><h4 class="c2" id="h.bpf6rw80di1b"><span>Persisting an object</span></h4><p class="c4 c3"><span class="c1">var mongoose = require(&#39;mongoose&#39;);</span></p><p class="c4 c3"><span class="c1">var Blog = mongoose;</span></p><p class="c4 c0"><span class="c1"></span></p><p class="c4 c3"><span class="c1">var blog = new Blog({title: &#39;New blog post&#39;});</span></p><p class="c4 c3"><span class="c1">blog.save(function(err) {</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp;if (err) {return handleError(err);} //validation failed, connection closed, ...</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp;console.log(&#39;Blog saved successfully&#39;);</span></p><p class="c4 c3"><span class="c1">});</span></p><h4 class="c2" id="h.zbltztqkvwos"><span>Querying</span></h4><p class="c3"><span>Common mongodb queries can be used on models</span></p><p class="c3"><span>Model#find, Model#findOne, ..</span></p><p class="c3"><span class="c1">Blog.find({title: &#39;New blog post&#39;}, function(err, res) {...});</span></p><p class="c3"><span>Model#aggregate</span></p><p class="c3"><span class="c1">Blog.aggregate([{$match: match}, {$project: {comments: 1, _id: 0}, {$unwind: &#39;$comments&#39;}]).exec(function(err, res){...});</span></p><h4 class="c2" id="h.jlt6027gckji"><span>Updating</span></h4><p class="c3"><span>TODO? :)</span></p><h3 class="c2" id="h.pt1u4lnbeefp"><span>References and subdocuments</span></h3><p class="c3"><span class="c1">var userSchema = &nbsp;= new Schema({</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; username: {type: String, unique: true}</span></p><p class="c3"><span class="c1">});</span></p><p class="c3"><span class="c1">mongoose.model(&#39;Comment&#39;, commentSchema);</span></p><p class="c3"><span class="c1">----</span></p><p class="c3"><span class="c1">var commentSchema = new Schema({</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; text: String,</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; author: {type: mongoose.Schema.Types.ObjectId, ref: &#39;User&#39;, required: true}, //== reference by ObjectId for User model</span></p><p class="c3"><span class="c1">});</span></p><p class="c3"><span class="c1">mongoose.model(&#39;Comment&#39;, commentSchema);</span></p><p class="c3"><span class="c1">----</span></p><p class="c3"><span class="c1">var blogSchema = new Schema({</span></p><p class="c3"><span class="c1">&nbsp; title: &nbsp;String,</span></p><p class="c3"><span class="c1">&nbsp; &hellip;</span></p><p class="c3"><span class="c1">&nbsp; comments: [commentSchema] //== subdocuments as array of Comment models</span></p><p class="c3"><span class="c1">});</span></p><p class="c3"><span class="c1">mongoose.model(&#39;Blog&#39;, blogSchema);</span></p><h4 class="c2" id="h.obymzq8807di"><span>Population</span></h4><p class="c3"><span>MongoDB has(had) no join, but we still want references to related documents in other collections.</span></p><p class="c0"><span></span></p><p class="c3"><span>Population is an automatic process of replacing specified paths in the document with document(s) from other collection(s).</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">Comment.findOne(query).populate(&#39;author&#39;).exec(callback);</span></p><h3 class="c2" id="h.ha9hjc63dwy"><span>Plugins</span></h3><p class="c3"><span>Schemas are pluggable and you can extend their functionality after you defined one with specified plugins.</span></p><h4 class="c2" id="h.5f64gre53kfd"><span>Third party exmaple</span></h4><p class="c3"><span>npm module: `mongoose-times`. Adds `created` and `lastUpdated` date properties to the schema.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">var times = require(&#39;mongoose-times&#39;);</span></p><p class="c3"><span class="c1">var blogSchema = new Schema({</span></p><p class="c3"><span class="c1">&nbsp; title: &nbsp;String,</span></p><p class="c4 c3"><span class="c1">&nbsp; &hellip;</span></p><p class="c4 c3"><span class="c1">});</span></p><p class="c4 c3"><span class="c1">blogSchema.plugin(times)</span></p><h4 class="c2" id="h.fe6ahxokw22q"><span>Custom plugin</span></h4><p class="c3"><span class="c1">module.exports = function lastModifiedPlugin (schema, options) {</span></p><p class="c3"><span class="c1">&nbsp; schema.add({ lastMod: Date })</span></p><p class="c3"><span class="c1">&nbsp; </span></p><p class="c3"><span class="c1">&nbsp; schema.pre(&#39;save&#39;, function (next) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; this.lastMod = new Date</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; next()</span></p><p class="c3"><span class="c1">&nbsp; })</span></p><p class="c3"><span class="c1">&nbsp; </span></p><p class="c3"><span class="c1">&nbsp; if (options &amp;&amp; options.index) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; schema.path(&#39;lastMod&#39;).index(options.index)</span></p><p class="c3"><span class="c1">&nbsp; }</span></p><p class="c3"><span class="c1">}</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span>..and in the schema:</span></p><p class="c3"><span class="c1">blogSchema.plugin(lastMod, { index: true });</span></p><p class="c0"><span></span></p><h2 class="c2" id="h.pnfo38dl508s"><span>SQL, Bookshelf.js</span></h2><p class="c3"><span>Popular frameworks/libraries</span></p><ul class="c6 lst-kix_1sz5v54zqxkf-0 start"><li class="c7 c3"><span>Sequelize - promise-based ORM for Node, PostgreSQL, MySQL, MariaDB, SQLite and MSSQL</span></li><li class="c7 c3"><span>Knex - SQL Query builder and Bookshelf, Javasript ORM built on top of it. Postgres, MySQL, MariaDB, SQLite3, and Oracle</span></li></ul><p class="c3"><span>We use knex &amp; bookshelf for it&rsquo;s simplicity, speed and flexibility such as mixing raw SQL and object queries.</span></p><p class="c0"><span></span></p><h3 class="c2" id="h.844aibawjjfa"><span>Knex</span></h3><p class="c3"><span>&ldquo;Knex.js is a &quot;batteries included&quot; SQL query builder&rdquo;</span></p><p class="c0"><span></span></p><p class="c3"><span>Simple query builder and schema builder.</span></p><p class="c0"><span></span></p><p class="c3"><span>Example queries:</span></p><p class="c3"><span class="c1">knex.select(&#39;title&#39;, &#39;author&#39;, &#39;year&#39;).from(&#39;books&#39;)</span></p><p class="c3"><span>Outputs results for:</span></p><p class="c3"><span class="c1">select `title`, `author`, `year` from `books`</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">knex(&#39;users&#39;).where({</span></p><p class="c3"><span class="c1">&nbsp; first_name: &#39;Test&#39;,</span></p><p class="c3"><span class="c1">&nbsp; last_name: &nbsp;&#39;User&#39;</span></p><p class="c3"><span class="c1">}).select(&#39;id&#39;)</span></p><p class="c3"><span>Outputs results for:</span></p><p class="c3"><span class="c1">select `id` from `users` where `first_name` = &#39;Test&#39; and `last_name` = &#39;User&#39;</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span>Any time, you can use raw sql to help you:</span></p><p class="c3"><span class="c1">knex.select(&#39;*&#39;).from(&#39;accounts&#39;).join(knex.raw(&#39;natural full join table1&#39;)).where(&#39;id&#39;, 1)</span></p><p class="c3"><span>Outputs results for:</span></p><p class="c3"><span class="c1">select * from `accounts` inner join natural full join table1 where `id` = 1</span></p><h4 class="c2" id="h.pn6bwcoklir4"><span>Creating schema - migrations</span></h4><p class="c3"><span>Migrations allow for you to define sets of schema changes.</span></p><p class="c3"><span>Migration is a set of instructions with up/down interface, to make the changes as well as rolling them back when needed.</span></p><p class="c0"><span></span></p><p class="c3"><span>Migrations consist of set of files, each defines a module with up and down methods. Up/down method must return a knex promise.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">exports.up = function(knex, Promise) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; return knex.schema.createTable(&#39;user&#39;, function(table){</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; table.increments(&#39;id&#39;).primary();</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; table.string(&#39;name).defaultTo(&#39;Anonymous&#39;);</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; table.enu(&#39;state&#39;, [&#39;ANONYMOUS&#39;, &#39;REGISTERED&#39;]);</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; table.integer(&#39;category_id&#39;)</span></p><p class="c3 c16"><span class="c1">.unsigned()</span></p><p class="c3 c16"><span class="c1">.references(&#39;id&#39;)</span></p><p class="c3 c16"><span class="c1">.inTable(&#39;category&#39;);</span></p><p class="c3"><span class="c1">};</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">exports.down = function(knex, Promise) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; return knex.schema.dropTable(&#39;user&#39;);</span></p><p class="c3"><span class="c1">};</span></p><h3 class="c2" id="h.hehx5p99wziq"><span>Bookshelf</span></h3><p class="c3"><span>What it is? ORM for Node, built on top of Knex.</span></p><p class="c3"><span>What it&rsquo;s not? It does not handle changes in schema, only eases relation quering and loading. Database schema has to be created in advance by knex.</span></p><p class="c0"><span></span></p><p class="c3"><span>Bookshelf entities are simplest as they can be. </span></p><ul class="c6 lst-kix_p363njxl3evr-0 start"><li class="c7 c3"><span>One model per table.</span></li></ul><ul class="c6 lst-kix_4mye2heykeo1-0 start"><li class="c7 c3"><span>You do now define properties and types. Entity properties are column names and their values.</span></li><li class="c7 c3"><span>You only define relations, serialization and few configurations (as table name, id attribute, plugins used);</span></li></ul><p class="c0"><span></span></p><p class="c3"><span>Model examples (One-to-many):</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">var Book = bookshelf.Model.extend({</span></p><p class="c3"><span class="c1">&nbsp; tableName: &#39;books&#39;,</span></p><p class="c3"><span class="c1">&nbsp; pages: function() {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; return this.hasMany(Page);</span></p><p class="c3"><span class="c1">&nbsp; }</span></p><p class="c3"><span class="c1">});</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">var Page = bookshelf.Model.extend({</span></p><p class="c3"><span class="c1">&nbsp; tableName: &#39;pages&#39;,</span></p><p class="c3"><span class="c1">&nbsp; book: function() {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; return this.belongsTo(Book);</span></p><p class="c3"><span class="c1">&nbsp; }</span></p><p class="c3"><span class="c1">});</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span>These models assume database schema has been created. If not, bookshelf will throw an error when trying to read unexisting tables, or missing columns. With knex, creation can look like following:</span></p><p class="c3"><span class="c1">exports.up = function(knex, Promise) {</span></p><p class="c3"><span class="c1">&nbsp; return knex.schema.createTable(&#39;books&#39;, function(table) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; table.increments(&#39;id&#39;).primary();</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; table.string(&#39;name&#39;);</span></p><p class="c3"><span class="c1">&nbsp; }).createTable(&#39;pages&#39;, function(table) {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; table.increments(&#39;id&#39;).primary();</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; table.string(&#39;content&#39;);</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; table.integer(&#39;book_id&#39;).references(&#39;books.id&#39;)</span></p><p class="c3"><span class="c1">&nbsp; });</span></p><p class="c3"><span class="c1">};</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">exports.down = function(knex, Promise) {</span></p><p class="c3"><span class="c1">&nbsp; return knex.schema.dropTable(&#39;books&#39;)</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; .dropTable(&#39;pages&#39;);</span></p><p class="c3"><span class="c1">};</span></p><h4 class="c2" id="h.4srggmem00y7"><span>Entity manipulation</span></h4><p class="c3"><span>Persisting entity is simple as this:</span></p><p class="c3"><span class="c1">new Book({name: &#39;Lexicon&#39;}).save() //returns a promise with saved entity</span></p><p class="c3"><span>The object passed to bookshelf model always has to correspond with defined table. Bookshelf doesn&rsquo;t care about what&rsquo;s in the object you are trying to save, but creates insert query accordingly. When there are missing properties or on the other too much properties database table doesn&rsquo;t have, SQL will throw an error.</span></p><p class="c0"><span></span></p><p class="c3"><span>Fetching an entity can be simple as</span></p><p class="c3"><span class="c1">Book.where({id: 123}).fetch() //returns a promise with model or null</span></p><p class="c3"><span>or more complicated, where you can use knex queries.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">Book.query(qb =&gt; {</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; qb.select(&#39;book.id&#39;);</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; qb.leftJoin(&#39;book_authors&#39;, &#39;book.id&#39;, &#39;book_authors.book_id&#39;);</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; qb.where(&#39;book_authors.author_id&#39;, 43);</span></p><p class="c3"><span class="c1">});</span></p><p class="c0"><span></span></p><p class="c3"><span>As you can see, ORM here is seen minimally and its more of a simple knex query.</span></p><p class="c0"><span></span></p><p class="c3"><span>ORM part comes next.</span></p><p class="c0"><span></span></p><p class="c3"><span>Assuming we&rsquo;ve got query above saved in `query` variable, we can now fetch all Book as models we defined earlier.</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">query.orderBy(&#39;id&#39;).fetchAll({withRelated: [&#39;pages&#39;]});</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span>Fetches all books we defined in query above, but now the book objects contain related pages objects (because we defined the relation in models).</span></p><p class="c0"><span></span></p><p class="c3"><span>Without additional withRelated in fetch options, related entities would have been empty array as model does not know about any.</span></p><p class="c0"><span></span></p><p class="c3"><span>You can use dot notation to fetch with related to related objects: i.e using </span></p><p class="c3"><span class="c1">withRelated: [&#39;pages.paragraphs&#39;]</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span>You can also query for related objects if you dont want all of them or anything else you can do with a query builder. i.e. ordering:</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">new Book({&#39;ISBN-13&#39;: &#39;9780440180296&#39;}).fetch({</span></p><p class="c3"><span class="c1">&nbsp; withRelated: [</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; &#39;genre&#39;, &#39;editions&#39;,</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; { chapters: function(query) { query.orderBy(&#39;chapter_number&#39;); }}</span></p><p class="c3"><span class="c1">&nbsp; ]</span></p><p class="c3"><span class="c1">})</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c15">LIBOR TODO vs java hibernate</span></p><h2 class="c2" id="h.xom55vl5xjr"><span>Templates, templating engines</span></h2><p class="c0"><span></span></p><p class="c3"><span class="c15">LIBOR TODO vs jsp</span></p><p class="c0"><span class="c15"></span></p><p class="c3"><span>A template engine enables you to use static template files in your application. At runtime, the template engine replaces variables in a template file with actual values, and transforms the template into an HTML file sent to the client. This approach makes it easier to design an HTML page.</span></p><p class="c0"><span></span></p><p class="c3"><span>Most popular template engines are Pug (formerly Jade), Swig, Mustache, EJS.</span></p><p class="c0"><span></span></p><p class="c3"><span>All have it&rsquo;s pros and cons: while Pug provides cleaner syntax, it&rsquo;s whitespace sensitive and it&rsquo;s far from HTML, making it hard for someone to read and work with:</span></p><p class="c0"><span></span></p><p class="c3"><span class="c1">html</span></p><p class="c3"><span class="c1">&nbsp; head</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; title= title</span></p><p class="c3"><span class="c1">&nbsp; body</span></p><p class="c3"><span class="c1">&nbsp; &nbsp; h1= message</span></p><p class="c0"><span></span></p><p class="c3"><span>That is why we stick with Swig, which may be little bit more verbose, it ships with support for Express, provides easily extensible interface and supports many of &ldquo;standard&rdquo; template features as template inheritace and macros.</span></p><p class="c0"><span></span></p><p class="c3"><span>Swig example: </span></p><p class="c4 c3"><span class="c1">&lt;h1&gt;{{ pagename|title }}&lt;/h1&gt;</span></p><p class="c4 c3"><span class="c1">&lt;ul&gt;</span></p><p class="c4 c3"><span class="c1">{% for author in authors %}</span></p><p class="c4 c3"><span class="c1">&nbsp; &lt;li{% if loop.first %} class=&quot;first&quot;{% endif %}&gt;</span></p><p class="c4 c3"><span class="c1">&nbsp; &nbsp; {{ author }}</span></p><p class="c4 c3"><span class="c1">&nbsp; &lt;/li&gt;</span></p><p class="c4 c3"><span class="c1">{% endfor %}</span></p><p class="c4 c3"><span class="c1">&lt;/ul&gt;</span></p><h3 class="c2" id="h.7tdz2m7oxxov"><span>Usage in express</span></h3><p class="c3"><span>Bootstrap configuratio.:</span></p><p class="c3"><span class="c1">var swig = require(&#39;swig&#39;);</span></p><p class="c3"><span class="c1">app.engine(&#39;html&#39;, swig.renderFile);</span></p><p class="c4 c3"><span>And in controller action </span></p><p class="c3"><span class="c1">res.render(templateName, {var1: val1, ..});</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span>`var1` then can be accessed in template, i.e. printed out: {{ var1 }}</span></p><p class="c0"><span></span></p><p class="c3"><span>Node Template already has this bootstrap, configred and ready to use.</span></p><p class="c0"><span></span></p><p class="c3"><span>NOTE: `res.locals` is visible to all templates. You can configure this in any middleware (before rendering a template, obviously).</span></p><h3 class="c2" id="h.hkoeh5i9ptdk"><span>Accessing variables</span></h3><p class="c3"><span>{{ foo.bar }} in template equals foo.bar in pure Javascript and ouputs it&rsquo;s value.</span></p><p class="c3"><span>{{ foo.chicken-tacos }} as &ldquo;-&rdquo; is invalid json character you can&rsquo;t use that in JSON, neither on tempalte. Use foo[&#39;chicken-tacos&#39;]</span></p><p class="c0"><span></span></p><p class="c0"><span></span></p></body></html>